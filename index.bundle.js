"use strict";(self.webpackChunkjs_battleship=self.webpackChunkjs_battleship||[]).push([[57],{897:(e,n,t)=>{var r=t(72),a=t.n(r),o=t(825),s=t.n(o),i=t(659),l=t.n(i),A=t(56),c=t.n(A),d=t(540),p=t.n(d),m=t(113),u=t.n(m),g=t(365),h={};h.styleTagTransform=u(),h.setAttributes=c(),h.insert=l().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=p(),a()(g.A,h),g.A&&g.A.locals&&g.A.locals;const E="hit",y="miss",f="horizontal",B="vertical",C=10,b="player2-board",v="Game started!",I={INVALID_ORIENTATION:"Invalid orientation. Use 'horizontal' or 'vertical'.",INVALID_COORDINATES:"Ship placement coorindates are out of bounds [0-10].",INVALID_SHIP:"Ship must be provided.",OUT_OF_BOUNDS_HORIZONTAL:"Ship placement is out of bounds horizontally.",OUT_OF_BOUNDS_VERTICAL:"Ship placement is out of bounds vertically.",OVERLAPPING_SHIP:"Cannot place ship; position is already occupied.",ALREADY_ATTACKED:"This coordinate has already been attacked.",PLAYER1_BOARD_FAILED:"Player 1 Gameboard creation failed.",PLAYER2_BOARD_FAILED:"Player 2 Gameboard creation failed.",PLAYER_REQUIRED:"Both players are required to initialize game.",INVALID_PLAYER_OBJECT:"Invalid player objects provided.",INVALID_PLAYER:"Invalid player provided.",UNIQUE_NAME:"Players must have unique names.",GAMEBOARDS_REQUIRED:"Both players must have gameboards before initializing game.",GAMECONTROLLER_INIT_ERROR:"Error initializing GameController:",CONTAINER_NOT_FOUND:"Container not found.",ALREADY_STARTED:"Game has already started.",GAME_OVER:"Game is already over.",GAME_NOT_INITIALIZED:"Game not initialized",NO_VALID_MOVES:"No valid moves available.",GAME_REQUIRED:"Game instance is required",UI_REQUIRED:"UI instance is required",INVALID_PLAYERS_COUNT:"Exactly 2 players must be provided",INVALID_PLAYER:"Invalid player object provided",INVALID_GAMEBOARDS_COUNT:"Exactly 2 gameboards must be provided"},w="human",x="Alice",k="player1",N="computer",S="Computer",D="player2",T=(e,n,t)=>{if(e!==w&&e!==N)throw new Error(I.INVALID_PLAYER_TYPE);if(!n||""===n.trim())throw new Error(I.INVALID_PLAYER_NAME);if(!t||""===t.trim())throw new Error(I.INVALID_PLAYER_ID);let r=null,a=[],o=null;const s=e=>a.length>0?i(e):A(e),i=e=>{const n=a[a.length-1];if(a.length>1)return l(e);const t=[{x:n.x+1,y:n.y},{x:n.x-1,y:n.y},{x:n.x,y:n.y+1},{x:n.x,y:n.y-1}].filter((n=>c(n.x,n.y,e)));return t.length>0?t[Math.floor(Math.random()*t.length)]:(a=[],A(e))},l=e=>{const n=a[0],t=a[a.length-1];o||(o=n.x===t.x?"vertical":"horizontal");const r=[];"horizontal"===o?r.push({x:Math.min(...a.map((e=>e.x)))-1,y:n.y},{x:Math.max(...a.map((e=>e.x)))+1,y:n.y}):r.push({x:n.x,y:Math.min(...a.map((e=>e.y)))-1},{x:n.x,y:Math.max(...a.map((e=>e.y)))+1});const s=r.filter((n=>c(n.x,n.y,e)));return s.length>0?s[Math.floor(Math.random()*s.length)]:(o=null,i(e))},A=e=>{const n=e.getSize(),t=[];for(let r=0;r<n;r++)for(let a=r%2;a<n;a+=2)c(a,r,e)&&t.push({x:a,y:r});if(0===t.length)for(let r=0;r<n;r++)for(let a=0;a<n;a++)c(a,r,e)&&t.push({x:a,y:r});return t[Math.floor(Math.random()*t.length)]},c=(e,n,t)=>e>=0&&e<t.getSize()&&n>=0&&n<t.getSize()&&!t.hasBeenAttacked(e,n);return{attack:(e,n,t)=>{if("number"!=typeof e||"number"!=typeof n||e<0||n<0||e>=t.getSize()||n>=t.getSize())throw new Error(I.INVALID_COORDINATES);if(t.hasBeenAttacked(e,n))throw new Error(I.ALREADY_ATTACKED);const r=t.receiveAttack(e,n);return"hit"===r.result&&(a.push({x:e,y:n}),r.sunk&&(a=[],o=null)),r},getName:()=>n,getId:()=>t,getType:()=>e,getGameboard:()=>r,setGameboard:e=>{r=e},getValidCoordinates:e=>{let n,t;do{n=Math.floor(Math.random()*C),t=Math.floor(Math.random()*C)}while(e.hasBeenAttacked(n,t));return[n,t]},getNextMove:n=>{if(!n)throw new Error(I.INVALID_GAMEBOARD);const t=n.getSize();let r=!1;for(let e=0;e<t;e++){for(let a=0;a<t;a++)if(!n.hasBeenAttacked(a,e)){r=!0;break}if(r)break}if(!r)throw new Error(I.NO_VALID_MOVES);return"computer"===e?s(n):null},makeSmartMove:s,makeRandomMove:()=>{if(!r)throw new Error("No gameboard set");const e=r.getSize(),n=r.getAllAttacks();for(;;){const t=Math.floor(Math.random()*e),r=Math.floor(Math.random()*e);if(!n.has(`${t},${r}`))return{x:t,y:r}}}}},_=(e,n)=>{if(!Number.isInteger(n)||n<1)throw new Error("Length must be a positive integer.");let t=0;return{hit:()=>{t<n&&(t+=1)},getHits:()=>t,getLength:()=>n,getType:()=>e,isSunk:()=>t===n}},L=()=>({ship:null,shipType:null,isHit:!1,hasBeenAttacked:!1,status:"empty"}),O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=[],a=[],o=[],s=new Set;const i=()=>{t=((e,n)=>Array(e).fill(null).map((()=>Array(e).fill(null).map((()=>n())))))(e,L)},l=(e,n,a,o)=>{A(e,n,a,o),c(e,n,a,o),d(e,n,a,o),((e,n,a,o)=>{const s=e.getLength(),i=[];for(let r=0;r<s;r++){const s=o===f?n+r:n,l=o===B?a+r:a;t[l][s].ship=e,t[l][s].shipType=e.getType(),t[l][s].status="ship",i.push({x:s,y:l})}r.includes(e)||r.push({ship:e,positions:i})})(e,n,a,o)},A=(n,t,r,a)=>{if(!n)throw new Error(I.INVALID_SHIP);if(a!==f&&a!==B)throw new Error(I.INVALID_ORIENTATION);if(!Number.isInteger(t)||!Number.isInteger(r)||t<0||t>=e||r<0||r>=e)throw new Error(I.INVALID_COORDINATES)},c=(n,t,r,a)=>{const o=n.getLength();if(a===f&&t+o>e)throw new Error(I.OUT_OF_BOUNDS_HORIZONTAL);if(a===B&&r+o>e)throw new Error(I.OUT_OF_BOUNDS_VERTICAL)},d=(e,n,r,a)=>{const o=e.getLength();for(let e=0;e<o;e++){const o=a===f?n+e:n;if(null!==t[a===B?r+e:r][o].ship)throw new Error(I.OVERLAPPING_SHIP)}};return i(),{getBoard:()=>t,getSize:()=>e,getShips:()=>n,getPlacedShips:()=>r,placeShip:l,placeShipsRandomly:()=>{if(!n||!Array.isArray(n)||0===n.length)throw new Error("No ships provided for random placement");(()=>{const t=n.reduce(((e,n)=>e+n.length),0),r=e*e;if(t>r)throw new Error(`Ships require ${t} spaces but board only has ${r} spaces`)})();const t=[f,B];for(let r of n){let n=!1,a=0;const o=_(r.type,r.length);for(;!n&&a<100;){a++;const s=Math.floor(Math.random()*e),i=Math.floor(Math.random()*e),A=t[Math.floor(Math.random()*t.length)];try{l(o,s,i,A),n=!0}catch(e){if(a>=100)throw new Error(`Unable to place ship length ${r.length} after 100 attempts`)}}}},receiveAttack:(n,r)=>{if(n<0||n>=e||r<0||r>=e)throw new Error(I.INVALID_COORDINATES);const s=t[r][n];if(s.hasBeenAttacked)throw new Error(I.ALREADY_ATTACKED);return s.hasBeenAttacked=!0,null!==s.ship?(s.ship.hit(),s.status=E,a.push({x:n,y:r}),{result:E,shipType:s.shipType,sunk:s.ship.isSunk(),coordinates:{x:n,y:r}}):(s.status=y,o.push({x:n,y:r}),{result:y,shipType:null,sunk:!1,coordinates:{x:n,y:r}})},hasBeenAttacked:(e,n)=>t[n][e].hasBeenAttacked,getAllAttacks:()=>(a.forEach((e=>{let{x:n,y:t}=e;s.add(`${n},${t}`)})),o.forEach((e=>{let{x:n,y:t}=e;s.add(`${n},${t}`)})),s),getMissedAttacks:()=>o,getHits:()=>a,areAllShipsSunk:()=>0!==r.length&&r.every((e=>e.ship.isSunk())),allShipsPlaced:()=>{const e=n.reduce(((e,n)=>e+n.length),0);let r=0;return t.forEach((e=>{e.forEach((e=>{null!==e.ship&&r++}))})),{allPlaced:r===e,placed:r}},reset:()=>{i(),r=[],a=[],o=[],s.clear()},getSunkShipsCount:()=>r.reduce(((e,n)=>{let{ship:t}=n;return e+(t.isSunk()?1:0)}),0)}},R=[{type:"Carrier",length:5},{type:"Battleship",length:4},{type:"Cruiser",length:3},{type:"Submarine",length:3},{type:"Destroyer",length:2}],M="board-cell",z="disabled",G="hit",P="miss",U="sunk",V="message",$="score",Y="current-player",F="game",j="game-over",H=T(w,x,k),q=T(N,S,D),Q=O(C,[...R]),Z=O(C,[...R]);H.setGameboard(Q),q.setGameboard(Z);const W=(()=>{const e=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=document.createElement(e);return n.id&&(t.id=n.id),n.classes&&t.classList.add(...n.classes),n.textContent&&(t.textContent=n.textContent),n.parent&&n.parent.appendChild(t),t},n=function(n,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=document.getElementById(t);if(!a)throw new Error(I.CONTAINER_NOT_FOUND);const o=a._handleAttack;a.innerHTML="",n.forEach(((n,t)=>{const s=e("div",{classes:["board-row"],parent:a});n.forEach(((n,a)=>{const i=e("div",{classes:[M],parent:s});i.dataset.x=a,i.dataset.y=t,n.ship&&r&&(i.classList.add("ship"),n.ship.isSunk()&&i.classList.add(U)),n.status===E&&(i.classList.add(G),n.ship&&n.ship.isSunk()&&i.classList.add(U)),n.status===y&&i.classList.add(P),o&&i.addEventListener("click",(e=>{i.classList.contains(G)||i.classList.contains(P)||i.classList.contains(U)||(console.log(`Board clicked: ${a},${t}`),o(a,t))}))}))}))},t=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=document.getElementById(V);r&&(r.textContent=e,r.className=`message ${n}`,t>0&&setTimeout((()=>{r.textContent="",r.className="message"}),t))},r=(n,t,r,a)=>{n&&r?(document.getElementById($)||e("div",{id:$,parent:document.body})).textContent=`${n.getName()}: ${t} | ${r.getName()}: ${a}`:console.error("Missing player information for score update")},a=n=>{(document.getElementById(Y)||e("div",{id:Y,parent:document.body})).textContent=`Current Player: ${n.getName()}`,document.querySelectorAll(".player-section").forEach((e=>{e.classList.toggle("current",e.querySelector("h2").textContent===n.getName())}))};return{initUI:(o,s)=>{const i=[o,s];e("h1",{textContent:"Battleship",parent:document.body}),r(o,0,s,0),a(o),e("div",{id:V,parent:document.body});const l=e("div",{id:F,parent:document.body});i.forEach(((n,t)=>{((n,t,r)=>{const a=e("div",{classes:["player-section"],parent:r});e("h2",{textContent:n.getName(),parent:a}),e("div",{id:`player${t+1}-board`,classes:["board"],parent:a})})(n,t,l)})),n(o.getGameboard().getBoard(),"player1-board",!0),n(s.getGameboard().getBoard(),"player2-board",!1),t(v)},resetUI:()=>{const e=document.getElementById(F);if(e){const n=document.getElementById(V);e.innerHTML="",n&&e.appendChild(n)}const n=document.querySelector("h1");n&&n.remove();const t=document.getElementById($);t&&t.remove();const r=document.getElementById(Y);r&&r.remove();const a=document.getElementById(V);a&&(a.textContent="")},renderBoard:n,displayMessage:t,updateScore:r,updateCurrentPlayer:a,addBoardEventListeners:(e,n)=>{const t=document.getElementById(e);if(!t)throw new Error(I.CONTAINER_NOT_FOUND);const r=t.getElementsByClassName(M);Array.from(r).forEach((e=>{e.addEventListener("click",(()=>{if(!e.classList.contains(G)&&!e.classList.contains(P)&&!e.classList.contains(U)){const t=parseInt(e.dataset.x),r=parseInt(e.dataset.y);n(t,r)}}))}))},showGameOverScreen:n=>{const t=document.getElementById(j);t&&t.remove();const r=e("div",{id:j,classes:["overlay"],parent:document.body}),a=e("div",{classes:["game-over-content"],parent:r});e("h2",{textContent:`${n} wins!`,parent:a}),e("button",{textContent:"Play Again",classes:["play-again-button"],parent:a}).addEventListener("click",(()=>{location.reload()}))},enableBoardInteraction:e=>{const n=document.getElementById(e);if(!n)throw new Error(I.CONTAINER_NOT_FOUND);n.classList.remove(z),n.style.pointerEvents="auto"},disableBoardInteraction:e=>{const n=document.getElementById(e);if(!n)throw new Error(I.CONTAINER_NOT_FOUND);n.classList.add(z),n.style.pointerEvents="none"}}})(),K=function(){let e,n=!1,t=!1,r={},a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=["getName","getType","getId","setGameboard","getGameboard"],i=()=>{r[a.getName()]=0,r[o.getName()]=0},l=(e,n)=>{s.forEach((t=>{if("function"!=typeof e[t])throw new Error(`${n} is missing required method: ${t}`)}))},A=(n,t)=>{if(m())throw new Error(I.GAME_OVER);const a=p().getGameboard();if("number"!=typeof n||"number"!=typeof t||n<0||t<0||n>=C||t>=C)throw new Error(I.INVALID_COORDINATES);if(a.hasBeenAttacked(n,t))throw new Error(I.ALREADY_ATTACKED);const o=a.receiveAttack(n,t);return o.sunk&&(e=>{const n=e.getName();r[n]+=1})(e),a.areAllShipsSunk()&&g(!0),o},c=()=>e,d=n=>{if(!n||![a,o].includes(n))throw new Error(I.INVALID_PLAYER);e=n},p=()=>e===a?o:a,m=()=>t,u=e=>{n=e},g=e=>{t=e};return{initializeGame:()=>{if(!a||!o)throw new Error(I.PLAYER_REQUIRED);if(n)throw new Error(I.ALREADY_STARTED);if(l(a,"Player1"),l(o,"Player2"),a.getName()===o.getName())throw new Error(I.UNIQUE_NAME);if(!a.getGameboard()||!o.getGameboard())throw new Error(I.GAMEBOARDS_REQUIRED);return d(a),i(),u(!0),g(!1),{player1:a,player2:o,currentPlayer:e}},resetGame:()=>{try{if(!a||!o)throw new Error(I.GAME_NOT_INITIALIZED);d(a),i(),g(!1),u(!1),a.getGameboard().reset(),o.getGameboard().reset()}catch(e){throw console.error("Game reset error:",e),e}},getPlayers:()=>[a,o],getCurrentPlayer:c,getOpponent:p,isGameOver:m,isGameStarted:()=>n,getScore:()=>({...r}),attack:A,switchTurn:()=>{m()||(e=e===a?o:a)},handleComputerTurn:()=>{const e=c(),n=p();if("computer"===e.getType()){const t=e.getNextMove(n.getGameboard());return A(t.x,t.y)}return null}}}(H,q),J=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)throw new Error(I.GAME_REQUIRED);if(!n)throw new Error(I.UI_REQUIRED);if(t.length>0&&2!==t.length)throw new Error(I.INVALID_PLAYERS_COUNT);if(r.length>0&&2!==r.length)throw new Error(I.INVALID_GAMEBOARDS_COUNT);try{const[a,o]=2===t.length?t:[T(w,x,k),T(N,S,D)],[s,i]=2===r.length?r:[],l=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const n=e.getGameboard();if(t)n.placeShipsRandomly();else{const e=R.map((e=>_(e.length)));n.placeShip(e[0],0,0,f)}}catch(e){throw n.displayMessage(e.message),e}},A=()=>{if(e.isGameStarted())throw new Error(I.GAME_ALREADY_STARTED);try{return l(a,!0),l(o,!0),e.initializeGame(a,o),n.initUI(a,o),n.addBoardEventListeners(b,d),"human"===e.getCurrentPlayer().getType()&&n.enableBoardInteraction(b),n.displayMessage(v),!0}catch(e){throw n.displayMessage(e.message),e}},c=()=>{e.resetGame(),n.resetUI(),l(a,!0),l(o,!0),A()},d=(t,r)=>{try{if(e.isGameOver())throw new Error(I.GAME_OVER);if("computer"===e.getCurrentPlayer().getType())return;let a=e.attack(t,r);return p(a),e.isGameOver()||"computer"!==e.getCurrentPlayer().getType()||setTimeout((()=>{try{const n=e.getCurrentPlayer(),t=e.getOpponent().getGameboard(),r=n.makeSmartMove(t);a=e.attack(r.x,r.y),p(a)}catch(e){n.displayMessage("Error during computer move: "+e.message)}}),1e3),a}catch(e){throw n.displayMessage(e.message),e}},p=t=>{const r=e.getCurrentPlayer(),s=e.getOpponent(),i="hit"===t.result?`${r.getName()} hit ${s.getName()}'s ${t.shipType}!`:`${r.getName()} missed`;if(n.displayMessage(i),t.sunk){const e=`${r.getName()} sunk ${s.getName()}'s ${t.shipType}!`;n.displayMessage(e);const i=o.getGameboard().getSunkShipsCount(),l=a.getGameboard().getSunkShipsCount();n.updateScore(a,i,o,l)}if(n.renderBoard(a.getGameboard().getBoard(),"player1-board",!0),n.renderBoard(o.getGameboard().getBoard(),b,!1),n.addBoardEventListeners(b,d),e.isGameOver())return n.showGameOverScreen(r.getName()),void n.disableBoardInteraction(b);e.switchTurn();const l=e.getCurrentPlayer();n.updateCurrentPlayer(l),"human"===l.getType()?n.enableBoardInteraction(b):n.disableBoardInteraction(b)};return{startGame:A,restartGame:c,handleAttack:d,getPlayers:()=>[a,o],placeShipsForPlayer:l}}catch(e){throw n.displayMessage(e.message),e}}(K,W,[H,q],[Q,Z]);document.addEventListener("DOMContentLoaded",(()=>{try{J.startGame()}catch(e){console.error("Failed to start game:",e)}}))},365:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(354),a=t.n(r),o=t(314),s=t.n(o)()(a());s.push([e.id,"/* Base styles */\n:root {\n  --cell-size-desktop: 40px;\n  --cell-size-tablet: 35px;\n  --cell-size-mobile: 30px;\n  --gap-desktop: 50px;\n  --gap-tablet: 30px;\n  --gap-mobile: 20px;\n}\n\nbody {\n  font-family: Arial, sans-serif;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  padding: 1rem;\n  min-height: 100vh;\n  margin: 0;\n}\n\n/* Score and Current Player */\n#score,\n#current-player,\n#message {\n  text-align: center;\n  margin-bottom: 0.5rem;\n  width: 100%;\n}\n\n/* Game Container */\n#game {\n  display: flex;\n  gap: var(--gap-desktop);\n  margin-top: 10px;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n/* Player Sections */\n.player-section {\n  text-align: center;\n}\n\n/* Game Boards */\n.board {\n  display: grid;\n  grid-template-columns: repeat(10, var(--cell-size-desktop));\n  grid-template-rows: repeat(10, var(--cell-size-desktop));\n  gap: 2px;\n  background-color: #eee;\n  padding: 10px;\n  border-radius: 5px;\n}\n\n.board-cell {\n  width: var(--cell-size-desktop);\n  height: var(--cell-size-desktop);\n  background-color: #fff;\n  border: 1px solid #ccc;\n  cursor: pointer;\n}\n\n/* Tablet Styles */\n@media screen and (max-width: 1024px) {\n  .board {\n    grid-template-columns: repeat(10, var(--cell-size-tablet));\n    grid-template-rows: repeat(10, var(--cell-size-tablet));\n  }\n\n  .board-cell {\n    width: var(--cell-size-tablet);\n    height: var(--cell-size-tablet);\n  }\n\n  #game {\n    gap: var(--gap-tablet);\n  }\n\n  h1 {\n    font-size: 1.8rem;\n  }\n\n  h2 {\n    font-size: 1.3rem;\n  }\n}\n\n/* Mobile Styles */\n@media screen and (max-width: 768px) {\n  .board {\n    grid-template-columns: repeat(10, var(--cell-size-mobile));\n    grid-template-rows: repeat(10, var(--cell-size-mobile));\n  }\n\n  .board-cell {\n    width: var(--cell-size-mobile);\n    height: var(--cell-size-mobile);\n  }\n\n  #game {\n    gap: var(--gap-mobile);\n    flex-direction: column;\n    align-items: center;\n  }\n\n  h1 {\n    font-size: 1.5rem;\n  }\n\n  h2 {\n    font-size: 1.2rem;\n  }\n\n  .player-section {\n    margin-bottom: 1rem;\n  }\n}\n\n/* Game Over Modal - make it responsive */\n.overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  padding: 1rem;\n}\n\n.game-over-content {\n  background-color: white;\n  padding: 2rem;\n  border-radius: 8px;\n  text-align: center;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  max-width: 90%;\n  width: auto;\n}\n\n.play-again-button {\n  padding: 0.8rem 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  margin-top: 1rem;\n}\n\n.play-again-button:hover {\n  background-color: #45a049;\n}\n\n/* Cell States - keep existing styles */\n.ship {\n  background-color: #666;\n}\n.hit {\n  background-color: #ff4444;\n}\n.miss {\n  background-color: #44aaff;\n}\n.sunk {\n  background-color: #000;\n}\n#player2-board .sunk {\n  background-color: #8b0000;\n}\n\n/* Transitions */\n.board-cell {\n  transition: background-color 0.3s ease;\n}\n\n/* Accessibility */\n@media (prefers-reduced-motion: reduce) {\n  .board-cell {\n    transition: none;\n  }\n}\n","",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAAA,gBAAgB;AAChB;EACE,yBAAyB;EACzB,wBAAwB;EACxB,wBAAwB;EACxB,mBAAmB;EACnB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,8BAA8B;EAC9B,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,SAAS;EACT,aAAa;EACb,iBAAiB;EACjB,SAAS;AACX;;AAEA,6BAA6B;AAC7B;;;EAGE,kBAAkB;EAClB,qBAAqB;EACrB,WAAW;AACb;;AAEA,mBAAmB;AACnB;EACE,aAAa;EACb,uBAAuB;EACvB,gBAAgB;EAChB,eAAe;EACf,uBAAuB;AACzB;;AAEA,oBAAoB;AACpB;EACE,kBAAkB;AACpB;;AAEA,gBAAgB;AAChB;EACE,aAAa;EACb,2DAA2D;EAC3D,wDAAwD;EACxD,QAAQ;EACR,sBAAsB;EACtB,aAAa;EACb,kBAAkB;AACpB;;AAEA;EACE,+BAA+B;EAC/B,gCAAgC;EAChC,sBAAsB;EACtB,sBAAsB;EACtB,eAAe;AACjB;;AAEA,kBAAkB;AAClB;EACE;IACE,0DAA0D;IAC1D,uDAAuD;EACzD;;EAEA;IACE,8BAA8B;IAC9B,+BAA+B;EACjC;;EAEA;IACE,sBAAsB;EACxB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;AACF;;AAEA,kBAAkB;AAClB;EACE;IACE,0DAA0D;IAC1D,uDAAuD;EACzD;;EAEA;IACE,8BAA8B;IAC9B,+BAA+B;EACjC;;EAEA;IACE,sBAAsB;IACtB,sBAAsB;IACtB,mBAAmB;EACrB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,iBAAiB;EACnB;;EAEA;IACE,mBAAmB;EACrB;AACF;;AAEA,yCAAyC;AACzC;EACE,eAAe;EACf,MAAM;EACN,OAAO;EACP,WAAW;EACX,YAAY;EACZ,oCAAoC;EACpC,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,aAAa;EACb,aAAa;AACf;;AAEA;EACE,uBAAuB;EACvB,aAAa;EACb,kBAAkB;EAClB,kBAAkB;EAClB,yCAAyC;EACzC,cAAc;EACd,WAAW;AACb;;AAEA;EACE,sBAAsB;EACtB,eAAe;EACf,eAAe;EACf,yBAAyB;EACzB,YAAY;EACZ,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA,uCAAuC;AACvC;EACE,sBAAsB;AACxB;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,sBAAsB;AACxB;AACA;EACE,yBAAyB;AAC3B;;AAEA,gBAAgB;AAChB;EACE,sCAAsC;AACxC;;AAEA,kBAAkB;AAClB;EACE;IACE,gBAAgB;EAClB;AACF",sourcesContent:["/* Base styles */\n:root {\n  --cell-size-desktop: 40px;\n  --cell-size-tablet: 35px;\n  --cell-size-mobile: 30px;\n  --gap-desktop: 50px;\n  --gap-tablet: 30px;\n  --gap-mobile: 20px;\n}\n\nbody {\n  font-family: Arial, sans-serif;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  padding: 1rem;\n  min-height: 100vh;\n  margin: 0;\n}\n\n/* Score and Current Player */\n#score,\n#current-player,\n#message {\n  text-align: center;\n  margin-bottom: 0.5rem;\n  width: 100%;\n}\n\n/* Game Container */\n#game {\n  display: flex;\n  gap: var(--gap-desktop);\n  margin-top: 10px;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n/* Player Sections */\n.player-section {\n  text-align: center;\n}\n\n/* Game Boards */\n.board {\n  display: grid;\n  grid-template-columns: repeat(10, var(--cell-size-desktop));\n  grid-template-rows: repeat(10, var(--cell-size-desktop));\n  gap: 2px;\n  background-color: #eee;\n  padding: 10px;\n  border-radius: 5px;\n}\n\n.board-cell {\n  width: var(--cell-size-desktop);\n  height: var(--cell-size-desktop);\n  background-color: #fff;\n  border: 1px solid #ccc;\n  cursor: pointer;\n}\n\n/* Tablet Styles */\n@media screen and (max-width: 1024px) {\n  .board {\n    grid-template-columns: repeat(10, var(--cell-size-tablet));\n    grid-template-rows: repeat(10, var(--cell-size-tablet));\n  }\n\n  .board-cell {\n    width: var(--cell-size-tablet);\n    height: var(--cell-size-tablet);\n  }\n\n  #game {\n    gap: var(--gap-tablet);\n  }\n\n  h1 {\n    font-size: 1.8rem;\n  }\n\n  h2 {\n    font-size: 1.3rem;\n  }\n}\n\n/* Mobile Styles */\n@media screen and (max-width: 768px) {\n  .board {\n    grid-template-columns: repeat(10, var(--cell-size-mobile));\n    grid-template-rows: repeat(10, var(--cell-size-mobile));\n  }\n\n  .board-cell {\n    width: var(--cell-size-mobile);\n    height: var(--cell-size-mobile);\n  }\n\n  #game {\n    gap: var(--gap-mobile);\n    flex-direction: column;\n    align-items: center;\n  }\n\n  h1 {\n    font-size: 1.5rem;\n  }\n\n  h2 {\n    font-size: 1.2rem;\n  }\n\n  .player-section {\n    margin-bottom: 1rem;\n  }\n}\n\n/* Game Over Modal - make it responsive */\n.overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  padding: 1rem;\n}\n\n.game-over-content {\n  background-color: white;\n  padding: 2rem;\n  border-radius: 8px;\n  text-align: center;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  max-width: 90%;\n  width: auto;\n}\n\n.play-again-button {\n  padding: 0.8rem 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  margin-top: 1rem;\n}\n\n.play-again-button:hover {\n  background-color: #45a049;\n}\n\n/* Cell States - keep existing styles */\n.ship {\n  background-color: #666;\n}\n.hit {\n  background-color: #ff4444;\n}\n.miss {\n  background-color: #44aaff;\n}\n.sunk {\n  background-color: #000;\n}\n#player2-board .sunk {\n  background-color: #8b0000;\n}\n\n/* Transitions */\n.board-cell {\n  transition: background-color 0.3s ease;\n}\n\n/* Accessibility */\n@media (prefers-reduced-motion: reduce) {\n  .board-cell {\n    transition: none;\n  }\n}\n"],sourceRoot:""}]);const i=s},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var A=0;A<e.length;A++){var c=[].concat(e[A]);r&&s[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),n.push(c))}},n}},354:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(a," */");return[n].concat([o]).join("\n")}return[n].join("\n")}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var o={},s=[],i=0;i<e.length;i++){var l=e[i],A=r.base?l[0]+r.base:l[0],c=o[A]||0,d="".concat(A," ").concat(c);o[A]=c+1;var p=t(d),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)n[p].references++,n[p].updater(m);else{var u=a(m,r);r.byIndex=i,n.splice(i,0,{identifier:d,updater:u,references:1})}s.push(d)}return s}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var i=t(o[s]);n[i].references--}for(var l=r(e,a),A=0;A<o.length;A++){var c=t(o[A]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}o=l}}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},e=>{e(e.s=897)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZixPQUFPLEVBRVRKLEVBQWFJLFdBQVdDLFlBQVlMLEVBQ3RDLENBZ0JNTSxDQUFtQk4sRUFDckIsRUFFSixDLFVDOUNBOUQsRUFBT0MsUUFWUCxTQUEyQm9DLEVBQUt5QixHQUM5QixHQUFJQSxFQUFhTyxXQUNmUCxFQUFhTyxXQUFXQyxRQUFVakMsTUFDN0IsQ0FDTCxLQUFPeUIsRUFBYVMsWUFDbEJULEVBQWFLLFlBQVlMLEVBQWFTLFlBRXhDVCxFQUFheEssWUFBWUwsU0FBU3VMLGVBQWVuQyxHQUNuRCxDQUNGLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL3N0eWxlcy5jc3M/NDRiMiIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL2hlbHBlcnMvY29uc3RhbnRzL2JvYXJkQ29uc3RhbnRzLmpzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9zcmMvaGVscGVycy9jb25zdGFudHMvbWVzc2FnZUNvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL2hlbHBlcnMvY29uc3RhbnRzL3BsYXllckNvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvcGxheWVyLmpzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9zcmMvY29tcG9uZW50cy9zaGlwLmpzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9zcmMvaGVscGVycy9nYW1lYm9hcmRVdGlscy5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9zcmMvaGVscGVycy9jb25zdGFudHMvc2hpcENvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL2hlbHBlcnMvY29uc3RhbnRzL2Nzc0NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9zcmMvY29tcG9uZW50cy91aS5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvZ2FtZS5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvZ2FtZUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vanMtYmF0dGxlc2hpcC8uL3NyYy9zdHlsZXMuY3NzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL2pzLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vanMtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly9qcy1iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8vanMtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZXMuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZXMuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiZXhwb3J0IGNvbnN0IENFTExfU1RBVFVTID0ge1xuICBFTVBUWTogXCJlbXB0eVwiLFxuICBTSElQOiBcInNoaXBcIixcbiAgSElUOiBcImhpdFwiLFxuICBNSVNTOiBcIm1pc3NcIixcbiAgU1VOSzogXCJzdW5rXCIsXG59O1xuXG5leHBvcnQgY29uc3QgT1JJRU5UQVRJT05TID0ge1xuICBIT1JJWk9OVEFMOiBcImhvcml6b250YWxcIixcbiAgVkVSVElDQUw6IFwidmVydGljYWxcIixcbn07XG5cbmV4cG9ydCBjb25zdCBCT0FSRF9TSVpFID0gMTA7XG5cbmV4cG9ydCBjb25zdCBQTEFZRVJfQk9BUkRTID0ge1xuICBQTEFZRVIxOiBcInBsYXllcjEtYm9hcmRcIixcbiAgUExBWUVSMjogXCJwbGF5ZXIyLWJvYXJkXCIsXG59O1xuIiwiLy8gKiBtZXNzYWdlcy5qc1xuaW1wb3J0IHsgQk9BUkRfU0laRSB9IGZyb20gXCIuL2JvYXJkQ29uc3RhbnRzXCI7XG5cbmV4cG9ydCBjb25zdCBTVUNDRVNTX01FU1NBR0VTID0ge1xuICBHQU1FX1NUQVJURUQ6IFwiR2FtZSBzdGFydGVkIVwiLFxuICBISVQ6IFwiSGl0IVwiLFxuICBNSVNTOiBcIk1pc3MhXCIsXG4gIFNVTks6IFwiU3VuayFcIixcbn07XG5cbmV4cG9ydCBjb25zdCBFUlJPUl9NRVNTQUdFUyA9IHtcbiAgSU5WQUxJRF9PUklFTlRBVElPTjogXCJJbnZhbGlkIG9yaWVudGF0aW9uLiBVc2UgJ2hvcml6b250YWwnIG9yICd2ZXJ0aWNhbCcuXCIsXG4gIElOVkFMSURfQ09PUkRJTkFURVM6IGBTaGlwIHBsYWNlbWVudCBjb29yaW5kYXRlcyBhcmUgb3V0IG9mIGJvdW5kcyBbMC0ke0JPQVJEX1NJWkV9XS5gLFxuICBJTlZBTElEX1NISVA6IFwiU2hpcCBtdXN0IGJlIHByb3ZpZGVkLlwiLFxuICBPVVRfT0ZfQk9VTkRTX0hPUklaT05UQUw6IFwiU2hpcCBwbGFjZW1lbnQgaXMgb3V0IG9mIGJvdW5kcyBob3Jpem9udGFsbHkuXCIsXG4gIE9VVF9PRl9CT1VORFNfVkVSVElDQUw6IFwiU2hpcCBwbGFjZW1lbnQgaXMgb3V0IG9mIGJvdW5kcyB2ZXJ0aWNhbGx5LlwiLFxuICBPVkVSTEFQUElOR19TSElQOiBcIkNhbm5vdCBwbGFjZSBzaGlwOyBwb3NpdGlvbiBpcyBhbHJlYWR5IG9jY3VwaWVkLlwiLFxuICBBTFJFQURZX0FUVEFDS0VEOiBcIlRoaXMgY29vcmRpbmF0ZSBoYXMgYWxyZWFkeSBiZWVuIGF0dGFja2VkLlwiLFxuICBQTEFZRVIxX0JPQVJEX0ZBSUxFRDogXCJQbGF5ZXIgMSBHYW1lYm9hcmQgY3JlYXRpb24gZmFpbGVkLlwiLFxuICBQTEFZRVIyX0JPQVJEX0ZBSUxFRDogXCJQbGF5ZXIgMiBHYW1lYm9hcmQgY3JlYXRpb24gZmFpbGVkLlwiLFxuICBQTEFZRVJfUkVRVUlSRUQ6IFwiQm90aCBwbGF5ZXJzIGFyZSByZXF1aXJlZCB0byBpbml0aWFsaXplIGdhbWUuXCIsXG4gIElOVkFMSURfUExBWUVSX09CSkVDVDogXCJJbnZhbGlkIHBsYXllciBvYmplY3RzIHByb3ZpZGVkLlwiLFxuICBJTlZBTElEX1BMQVlFUjogXCJJbnZhbGlkIHBsYXllciBwcm92aWRlZC5cIixcbiAgVU5JUVVFX05BTUU6IFwiUGxheWVycyBtdXN0IGhhdmUgdW5pcXVlIG5hbWVzLlwiLFxuICBHQU1FQk9BUkRTX1JFUVVJUkVEOlxuICAgIFwiQm90aCBwbGF5ZXJzIG11c3QgaGF2ZSBnYW1lYm9hcmRzIGJlZm9yZSBpbml0aWFsaXppbmcgZ2FtZS5cIixcbiAgR0FNRUNPTlRST0xMRVJfSU5JVF9FUlJPUjogXCJFcnJvciBpbml0aWFsaXppbmcgR2FtZUNvbnRyb2xsZXI6XCIsXG4gIENPTlRBSU5FUl9OT1RfRk9VTkQ6IFwiQ29udGFpbmVyIG5vdCBmb3VuZC5cIixcbiAgQUxSRUFEWV9TVEFSVEVEOiBcIkdhbWUgaGFzIGFscmVhZHkgc3RhcnRlZC5cIixcbiAgR0FNRV9PVkVSOiBcIkdhbWUgaXMgYWxyZWFkeSBvdmVyLlwiLFxuICBHQU1FX05PVF9JTklUSUFMSVpFRDogXCJHYW1lIG5vdCBpbml0aWFsaXplZFwiLFxuICBOT19WQUxJRF9NT1ZFUzogXCJObyB2YWxpZCBtb3ZlcyBhdmFpbGFibGUuXCIsXG4gIEdBTUVfUkVRVUlSRUQ6IFwiR2FtZSBpbnN0YW5jZSBpcyByZXF1aXJlZFwiLFxuICBVSV9SRVFVSVJFRDogXCJVSSBpbnN0YW5jZSBpcyByZXF1aXJlZFwiLFxuICBJTlZBTElEX1BMQVlFUlNfQ09VTlQ6IFwiRXhhY3RseSAyIHBsYXllcnMgbXVzdCBiZSBwcm92aWRlZFwiLFxuICBJTlZBTElEX1BMQVlFUjogXCJJbnZhbGlkIHBsYXllciBvYmplY3QgcHJvdmlkZWRcIixcbiAgSU5WQUxJRF9HQU1FQk9BUkRTX0NPVU5UOiBcIkV4YWN0bHkgMiBnYW1lYm9hcmRzIG11c3QgYmUgcHJvdmlkZWRcIixcbn07XG4iLCJleHBvcnQgY29uc3QgUExBWUVSUyA9IHtcbiAgUExBWUVSMToge1xuICAgIFRZUEU6IFwiaHVtYW5cIixcbiAgICBOQU1FOiBcIkFsaWNlXCIsXG4gICAgSUQ6IFwicGxheWVyMVwiLFxuICB9LFxuICBQTEFZRVIyOiB7XG4gICAgVFlQRTogXCJjb21wdXRlclwiLFxuICAgIE5BTUU6IFwiQ29tcHV0ZXJcIixcbiAgICBJRDogXCJwbGF5ZXIyXCIsXG4gIH0sXG59O1xuIiwiaW1wb3J0IHsgQk9BUkRfU0laRSB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0YW50cy9ib2FyZENvbnN0YW50c1wiO1xuaW1wb3J0IHsgRVJST1JfTUVTU0FHRVMgfSBmcm9tIFwiLi4vaGVscGVycy9jb25zdGFudHMvbWVzc2FnZUNvbnN0YW50c1wiO1xuaW1wb3J0IHsgUExBWUVSUyB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0YW50cy9wbGF5ZXJDb25zdGFudHNcIjtcblxuZXhwb3J0IGNvbnN0IFBsYXllciA9ICh0eXBlLCBuYW1lLCBpZCkgPT4ge1xuICBpZiAodHlwZSAhPT0gUExBWUVSUy5QTEFZRVIxLlRZUEUgJiYgdHlwZSAhPT0gUExBWUVSUy5QTEFZRVIyLlRZUEUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuSU5WQUxJRF9QTEFZRVJfVFlQRSk7XG4gIH1cbiAgaWYgKCFuYW1lIHx8IG5hbWUudHJpbSgpID09PSBcIlwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLklOVkFMSURfUExBWUVSX05BTUUpO1xuICB9XG4gIGlmICghaWQgfHwgaWQudHJpbSgpID09PSBcIlwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLklOVkFMSURfUExBWUVSX0lEKTtcbiAgfVxuICBsZXQgZ2FtZWJvYXJkID0gbnVsbDsgLy8gSW5pdGlhbGl6ZSB3aXRob3V0IGEgZ2FtZWJvYXJkXG4gIC8vIFRyYWNrIGhpdHMgdGhhdCBoYXZlbid0IGJlZW4gZnVsbHkgZXhwbG9yZWRcbiAgbGV0IGFjdGl2ZUhpdHMgPSBbXTtcbiAgLy8gVHJhY2sgZGlyZWN0aW9uIG9mIGN1cnJlbnQgc2hpcCBiZWluZyB0YXJnZXRlZFxuICBsZXQgY3VycmVudERpcmVjdGlvbiA9IG51bGw7XG5cbiAgY29uc3QgYXR0YWNrID0gKHgsIHksIG9wcG9uZW50R2FtZWJvYXJkKSA9PiB7XG4gICAgLy8gVmFsaWRhdGUgY29vcmRpbmF0ZXNcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgeCAhPT0gXCJudW1iZXJcIiB8fFxuICAgICAgdHlwZW9mIHkgIT09IFwibnVtYmVyXCIgfHxcbiAgICAgIHggPCAwIHx8XG4gICAgICB5IDwgMCB8fFxuICAgICAgeCA+PSBvcHBvbmVudEdhbWVib2FyZC5nZXRTaXplKCkgfHxcbiAgICAgIHkgPj0gb3Bwb25lbnRHYW1lYm9hcmQuZ2V0U2l6ZSgpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuSU5WQUxJRF9DT09SRElOQVRFUyk7XG4gICAgfVxuXG4gICAgaWYgKG9wcG9uZW50R2FtZWJvYXJkLmhhc0JlZW5BdHRhY2tlZCh4LCB5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLkFMUkVBRFlfQVRUQUNLRUQpO1xuICAgIH1cblxuICAgIGNvbnN0IGF0dGFja1Jlc3VsdCA9IG9wcG9uZW50R2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soeCwgeSk7XG5cbiAgICBpZiAoYXR0YWNrUmVzdWx0LnJlc3VsdCA9PT0gXCJoaXRcIikge1xuICAgICAgYWN0aXZlSGl0cy5wdXNoKHsgeCwgeSB9KTtcbiAgICAgIC8vIElmIHNoaXAgd2FzIHN1bmssIGNsZWFyIGFjdGl2ZSBoaXRzXG4gICAgICBpZiAoYXR0YWNrUmVzdWx0LnN1bmspIHtcbiAgICAgICAgYWN0aXZlSGl0cyA9IFtdO1xuICAgICAgICBjdXJyZW50RGlyZWN0aW9uID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYXR0YWNrUmVzdWx0O1xuICB9O1xuXG4gIGNvbnN0IGdldE5hbWUgPSAoKSA9PiBuYW1lO1xuXG4gIGNvbnN0IGdldElkID0gKCkgPT4gaWQ7XG5cbiAgY29uc3QgZ2V0VHlwZSA9ICgpID0+IHR5cGU7XG5cbiAgY29uc3QgZ2V0R2FtZWJvYXJkID0gKCkgPT4gZ2FtZWJvYXJkO1xuXG4gIGNvbnN0IHNldEdhbWVib2FyZCA9IChuZXdHYW1lYm9hcmQpID0+IHtcbiAgICBnYW1lYm9hcmQgPSBuZXdHYW1lYm9hcmQ7XG4gIH07XG5cbiAgY29uc3QgZ2V0VmFsaWRDb29yZGluYXRlcyA9IChvcHBvbmVudEdhbWVib2FyZCkgPT4ge1xuICAgIGxldCB4LCB5O1xuXG4gICAgZG8ge1xuICAgICAgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEJPQVJEX1NJWkUpO1xuICAgICAgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEJPQVJEX1NJWkUpO1xuICAgIH0gd2hpbGUgKG9wcG9uZW50R2FtZWJvYXJkLmhhc0JlZW5BdHRhY2tlZCh4LCB5KSk7XG5cbiAgICByZXR1cm4gW3gsIHldO1xuICB9O1xuXG4gIGNvbnN0IG1ha2VSYW5kb21Nb3ZlID0gKCkgPT4ge1xuICAgIGlmICghZ2FtZWJvYXJkKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBnYW1lYm9hcmQgc2V0XCIpO1xuXG4gICAgY29uc3Qgc2l6ZSA9IGdhbWVib2FyZC5nZXRTaXplKCk7XG4gICAgY29uc3QgYWxsQXR0YWNrcyA9IGdhbWVib2FyZC5nZXRBbGxBdHRhY2tzKCk7XG5cbiAgICAvLyBLZWVwIHRyeWluZyByYW5kb20gY29vcmRpbmF0ZXMgdW50aWwgd2UgZmluZCBhbiB1bmF0dGFja2VkIHBvc2l0aW9uXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzaXplKTtcbiAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzaXplKTtcblxuICAgICAgaWYgKCFhbGxBdHRhY2tzLmhhcyhgJHt4fSwke3l9YCkpIHtcbiAgICAgICAgcmV0dXJuIHsgeCwgeSB9O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBBZGQgYSBzbWFydGVyIEFJIG1vdmUgbWV0aG9kIHRoYXQgY291bGQgYmUgdXNlZCBsYXRlclxuICBjb25zdCBtYWtlU21hcnRNb3ZlID0gKG9wcG9uZW50Qm9hcmQpID0+IHtcbiAgICAvLyAxLiBJZiB3ZSBoYXZlIGFjdGl2ZSBoaXRzLCB0cnkgdG8gc2luayB0aGF0IHNoaXBcbiAgICBpZiAoYWN0aXZlSGl0cy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0U2hpcChvcHBvbmVudEJvYXJkKTtcbiAgICB9XG5cbiAgICAvLyAyLiBJZiBubyBhY3RpdmUgaGl0cywgaHVudCBpbiBhbiBlZmZpY2llbnQgcGF0dGVyblxuICAgIHJldHVybiBodW50TmV3U2hpcChvcHBvbmVudEJvYXJkKTtcbiAgfTtcblxuICAvLyBIZWxwZXIgbWV0aG9kcyBmb3Igc21hcnQgdGFyZ2V0aW5nXG4gIGNvbnN0IHRhcmdldFNoaXAgPSAob3Bwb25lbnRCb2FyZCkgPT4ge1xuICAgIGNvbnN0IGxhc3RIaXQgPSBhY3RpdmVIaXRzW2FjdGl2ZUhpdHMubGVuZ3RoIC0gMV07XG5cbiAgICAvLyBJZiB3ZSBoYXZlIG11bHRpcGxlIGhpdHMsIHRyeSB0byBmb2xsb3cgdGhlIGxpbmVcbiAgICBpZiAoYWN0aXZlSGl0cy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gZm9sbG93U2hpcExpbmUob3Bwb25lbnRCb2FyZCk7XG4gICAgfVxuXG4gICAgLy8gVHJ5IGFkamFjZW50IGNlbGxzIGFyb3VuZCBzaW5nbGUgaGl0XG4gICAgY29uc3QgYWRqYWNlbnRNb3ZlcyA9IFtcbiAgICAgIHsgeDogbGFzdEhpdC54ICsgMSwgeTogbGFzdEhpdC55IH0sXG4gICAgICB7IHg6IGxhc3RIaXQueCAtIDEsIHk6IGxhc3RIaXQueSB9LFxuICAgICAgeyB4OiBsYXN0SGl0LngsIHk6IGxhc3RIaXQueSArIDEgfSxcbiAgICAgIHsgeDogbGFzdEhpdC54LCB5OiBsYXN0SGl0LnkgLSAxIH0sXG4gICAgXTtcblxuICAgIC8vIEZpbHRlciB2YWxpZCBtb3ZlcyBhbmQgdHJ5IHRoZW1cbiAgICBjb25zdCB2YWxpZE1vdmVzID0gYWRqYWNlbnRNb3Zlcy5maWx0ZXIoKG1vdmUpID0+XG4gICAgICBpc1ZhbGlkTW92ZShtb3ZlLngsIG1vdmUueSwgb3Bwb25lbnRCb2FyZClcbiAgICApO1xuXG4gICAgaWYgKHZhbGlkTW92ZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHZhbGlkTW92ZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsaWRNb3Zlcy5sZW5ndGgpXTtcbiAgICB9XG5cbiAgICAvLyBJZiBubyB2YWxpZCBhZGphY2VudCBtb3ZlcywgY2xlYXIgdGhpcyBoaXQgYW5kIGh1bnQgYWdhaW5cbiAgICBhY3RpdmVIaXRzID0gW107XG4gICAgcmV0dXJuIGh1bnROZXdTaGlwKG9wcG9uZW50Qm9hcmQpO1xuICB9O1xuXG4gIGNvbnN0IGZvbGxvd1NoaXBMaW5lID0gKG9wcG9uZW50Qm9hcmQpID0+IHtcbiAgICBjb25zdCBmaXJzdEhpdCA9IGFjdGl2ZUhpdHNbMF07XG4gICAgY29uc3QgbGFzdEhpdCA9IGFjdGl2ZUhpdHNbYWN0aXZlSGl0cy5sZW5ndGggLSAxXTtcblxuICAgIC8vIERldGVybWluZSBzaGlwIG9yaWVudGF0aW9uIGlmIG5vdCBrbm93blxuICAgIGlmICghY3VycmVudERpcmVjdGlvbikge1xuICAgICAgY3VycmVudERpcmVjdGlvbiA9IGZpcnN0SGl0LnggPT09IGxhc3RIaXQueCA/IFwidmVydGljYWxcIiA6IFwiaG9yaXpvbnRhbFwiO1xuICAgIH1cblxuICAgIC8vIFRyeSBleHRlbmRpbmcgdGhlIGxpbmUgaW4gYm90aCBkaXJlY3Rpb25zXG4gICAgY29uc3QgcG9zc2libGVNb3ZlcyA9IFtdO1xuICAgIGlmIChjdXJyZW50RGlyZWN0aW9uID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgLy8gVHJ5IGxlZnQgYW5kIHJpZ2h0IG9mIHRoZSBsaW5lXG4gICAgICBwb3NzaWJsZU1vdmVzLnB1c2goXG4gICAgICAgIHsgeDogTWF0aC5taW4oLi4uYWN0aXZlSGl0cy5tYXAoKGgpID0+IGgueCkpIC0gMSwgeTogZmlyc3RIaXQueSB9LFxuICAgICAgICB7IHg6IE1hdGgubWF4KC4uLmFjdGl2ZUhpdHMubWFwKChoKSA9PiBoLngpKSArIDEsIHk6IGZpcnN0SGl0LnkgfVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVHJ5IGFib3ZlIGFuZCBiZWxvdyB0aGUgbGluZVxuICAgICAgcG9zc2libGVNb3Zlcy5wdXNoKFxuICAgICAgICB7IHg6IGZpcnN0SGl0LngsIHk6IE1hdGgubWluKC4uLmFjdGl2ZUhpdHMubWFwKChoKSA9PiBoLnkpKSAtIDEgfSxcbiAgICAgICAgeyB4OiBmaXJzdEhpdC54LCB5OiBNYXRoLm1heCguLi5hY3RpdmVIaXRzLm1hcCgoaCkgPT4gaC55KSkgKyAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWRNb3ZlcyA9IHBvc3NpYmxlTW92ZXMuZmlsdGVyKChtb3ZlKSA9PlxuICAgICAgaXNWYWxpZE1vdmUobW92ZS54LCBtb3ZlLnksIG9wcG9uZW50Qm9hcmQpXG4gICAgKTtcblxuICAgIGlmICh2YWxpZE1vdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB2YWxpZE1vdmVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZhbGlkTW92ZXMubGVuZ3RoKV07XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gdmFsaWQgbW92ZXMgaW4gbGluZSwgcmVzZXQgYW5kIHRyeSBwZXJwZW5kaWN1bGFyIGRpcmVjdGlvblxuICAgIGN1cnJlbnREaXJlY3Rpb24gPSBudWxsO1xuICAgIHJldHVybiB0YXJnZXRTaGlwKG9wcG9uZW50Qm9hcmQpO1xuICB9O1xuXG4gIGNvbnN0IGh1bnROZXdTaGlwID0gKG9wcG9uZW50Qm9hcmQpID0+IHtcbiAgICAvLyBVc2UgY2hlY2tlcmJvYXJkIHBhdHRlcm4gZm9yIGVmZmljaWVuY3lcbiAgICBjb25zdCBzaXplID0gb3Bwb25lbnRCb2FyZC5nZXRTaXplKCk7XG4gICAgY29uc3QgYWxsTW92ZXMgPSBbXTtcblxuICAgIC8vIEdlbmVyYXRlIGNoZWNrZXJib2FyZCBwYXR0ZXJuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBzaXplOyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSB5ICUgMjsgeCA8IHNpemU7IHggKz0gMikge1xuICAgICAgICBpZiAoaXNWYWxpZE1vdmUoeCwgeSwgb3Bwb25lbnRCb2FyZCkpIHtcbiAgICAgICAgICBhbGxNb3Zlcy5wdXNoKHsgeCwgeSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vIG1vdmVzIGluIGNoZWNrZXJib2FyZCBwYXR0ZXJuLCB0cnkgYWxsIHJlbWFpbmluZyBzcGFjZXNcbiAgICBpZiAoYWxsTW92ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHNpemU7IHkrKykge1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHNpemU7IHgrKykge1xuICAgICAgICAgIGlmIChpc1ZhbGlkTW92ZSh4LCB5LCBvcHBvbmVudEJvYXJkKSkge1xuICAgICAgICAgICAgYWxsTW92ZXMucHVzaCh7IHgsIHkgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFsbE1vdmVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbE1vdmVzLmxlbmd0aCldO1xuICB9O1xuXG4gIGNvbnN0IGlzVmFsaWRNb3ZlID0gKHgsIHksIG9wcG9uZW50Qm9hcmQpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgeCA+PSAwICYmXG4gICAgICB4IDwgb3Bwb25lbnRCb2FyZC5nZXRTaXplKCkgJiZcbiAgICAgIHkgPj0gMCAmJlxuICAgICAgeSA8IG9wcG9uZW50Qm9hcmQuZ2V0U2l6ZSgpICYmXG4gICAgICAhb3Bwb25lbnRCb2FyZC5oYXNCZWVuQXR0YWNrZWQoeCwgeSlcbiAgICApO1xuICB9O1xuXG4gIC8vIE1vZGlmeSBnZXROZXh0TW92ZSB0byB1c2Ugc21hcnQgdGFyZ2V0aW5nXG4gIGNvbnN0IGdldE5leHRNb3ZlID0gKG9wcG9uZW50Qm9hcmQpID0+IHtcbiAgICBpZiAoIW9wcG9uZW50Qm9hcmQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5JTlZBTElEX0dBTUVCT0FSRCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSB2YWxpZCBtb3ZlcyBhdmFpbGFibGVcbiAgICBjb25zdCBzaXplID0gb3Bwb25lbnRCb2FyZC5nZXRTaXplKCk7XG4gICAgbGV0IGhhc1ZhbGlkTW92ZSA9IGZhbHNlO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGF0IGxlYXN0IG9uZSB2YWxpZCBtb3ZlXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBzaXplOyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgc2l6ZTsgeCsrKSB7XG4gICAgICAgIGlmICghb3Bwb25lbnRCb2FyZC5oYXNCZWVuQXR0YWNrZWQoeCwgeSkpIHtcbiAgICAgICAgICBoYXNWYWxpZE1vdmUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaGFzVmFsaWRNb3ZlKSBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoIWhhc1ZhbGlkTW92ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLk5PX1ZBTElEX01PVkVTKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZSA9PT0gXCJjb21wdXRlclwiID8gbWFrZVNtYXJ0TW92ZShvcHBvbmVudEJvYXJkKSA6IG51bGw7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhdHRhY2ssXG4gICAgZ2V0TmFtZSxcbiAgICBnZXRJZCxcbiAgICBnZXRUeXBlLFxuICAgIGdldEdhbWVib2FyZCxcbiAgICBzZXRHYW1lYm9hcmQsXG4gICAgZ2V0VmFsaWRDb29yZGluYXRlcyxcbiAgICBnZXROZXh0TW92ZSxcbiAgICBtYWtlU21hcnRNb3ZlLFxuICAgIG1ha2VSYW5kb21Nb3ZlLFxuICB9O1xufTtcbiIsIi8vICogc2hpcC5qc1xuLyoqXG4gKiBDcmVhdGVzIGEgc2hpcCBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGxlbmd0aC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIC0gVGhlIGxlbmd0aCBvZiB0aGUgc2hpcC4gTXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgc2hpcCBvYmplY3QuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IGhpdCAtIFJlZ2lzdGVycyBhIGhpdCBvbiB0aGUgc2hpcC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gZ2V0SGl0cyAtIFJldHVybnMgdGhlIG51bWJlciBvZiBoaXRzIHRoZSBzaGlwIGhhcyB0YWtlbi5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gZ2V0TGVuZ3RoIC0gUmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBzaGlwLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBpc1N1bmsgLSBSZXR1cm5zIHRydWUgaWYgdGhlIHNoaXAgaXMgc3VuayAoaS5lLiwgbnVtYmVyIG9mIGhpdHMgZXF1YWxzIHRoZSBsZW5ndGggb2YgdGhlIHNoaXApLCBvdGhlcndpc2UgZmFsc2UuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGxlbmd0aCBpcyBub3QgYSBwb3NpdGl2ZSBpbnRlZ2VyLlxuICovXG5cbmV4cG9ydCBjb25zdCBTaGlwID0gKHR5cGUsIGxlbmd0aCkgPT4ge1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIobGVuZ3RoKSB8fCBsZW5ndGggPCAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTGVuZ3RoIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLlwiKTtcbiAgfVxuXG4gIGxldCBoaXRzID0gMDtcblxuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaWYgKGhpdHMgPCBsZW5ndGgpIHtcbiAgICAgIGhpdHMgKz0gMTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZ2V0SGl0cyA9ICgpID0+IGhpdHM7XG5cbiAgY29uc3QgZ2V0TGVuZ3RoID0gKCkgPT4gbGVuZ3RoO1xuXG4gIGNvbnN0IGdldFR5cGUgPSAoKSA9PiB0eXBlO1xuXG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IGhpdHMgPT09IGxlbmd0aDtcblxuICByZXR1cm4ge1xuICAgIGhpdCxcbiAgICBnZXRIaXRzLFxuICAgIGdldExlbmd0aCxcbiAgICBnZXRUeXBlLFxuICAgIGlzU3VuayxcbiAgfTtcbn07XG4iLCIvLyAqIGdhbWVib2FyZFV0aWxzLmpzXG5cbmltcG9ydCB7IENFTExfU1RBVFVTIH0gZnJvbSBcIi4vY29uc3RhbnRzL2JvYXJkQ29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgaW5pdGlhbCBnYW1lIGJvYXJkIGFzIGEgMkQgYXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSAtIFRoZSBzaXplIG9mIHRoZSBnYW1lIGJvYXJkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3JlYXRlQ2VsbCAtIEEgZnVuY3Rpb24gdG8gY3JlYXRlIGluZGl2aWR1YWwgY2VsbHMuXG4gKiBAcmV0dXJucyB7QXJyYXk8QXJyYXk8T2JqZWN0Pj59IFRoZSBpbml0aWFsaXplZCBnYW1lIGJvYXJkLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlQm9hcmQgPSAoc2l6ZSwgY3JlYXRlQ2VsbCkgPT4ge1xuICByZXR1cm4gQXJyYXkoc2l6ZSlcbiAgICAuZmlsbChudWxsKVxuICAgIC5tYXAoKCkgPT5cbiAgICAgIEFycmF5KHNpemUpXG4gICAgICAgIC5maWxsKG51bGwpXG4gICAgICAgIC5tYXAoKCkgPT4gY3JlYXRlQ2VsbCgpKVxuICAgICk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzaW5nbGUgY2VsbCBvYmplY3QgZm9yIHRoZSBnYW1lIGJvYXJkLlxuICogQHJldHVybnMge09iamVjdH0gVGhlIGluaXRpYWxpemVkIGNlbGwgb2JqZWN0LlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlQ2VsbCA9ICgpID0+ICh7XG4gIHNoaXA6IG51bGwsXG4gIHNoaXBUeXBlOiBudWxsLFxuICBpc0hpdDogZmFsc2UsXG4gIGhhc0JlZW5BdHRhY2tlZDogZmFsc2UsXG4gIHN0YXR1czogQ0VMTF9TVEFUVVMuRU1QVFksXG59KTtcbiIsIi8vICogZ2FtZWJvYXJkLmpzXG5pbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcC5qc1wiO1xuaW1wb3J0IHtcbiAgQ0VMTF9TVEFUVVMsXG4gIE9SSUVOVEFUSU9OUyxcbiAgQk9BUkRfU0laRSxcbn0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RhbnRzL2JvYXJkQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBFUlJPUl9NRVNTQUdFUyB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0YW50cy9tZXNzYWdlQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVCb2FyZCwgY3JlYXRlQ2VsbCB9IGZyb20gXCIuLi9oZWxwZXJzL2dhbWVib2FyZFV0aWxzLmpzXCI7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGdhbWVib2FyZCBmb3IgdGhlIEJhdHRsZXNoaXAgZ2FtZS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW3NpemU9Qk9BUkRfU0laRV0gLSBUaGUgc2l6ZSBvZiB0aGUgZ2FtZSBib2FyZCAoZGVmYXVsdCBpcyBCT0FSRF9TSVpFKS5cbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gW3NoaXBzPVtdXSAtIEFuIGFycmF5IG9mIGV4cGVjdGVkIHNoaXAgb2JqZWN0cyB0byBiZSBwbGFjZWQgb24gdGhlIGJvYXJkLlxuICogQHJldHVybnMge09iamVjdH0gVGhlIGdhbWVib2FyZCBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIG1ldGhvZHM6XG4gKiAgIC0gYGdldEJvYXJkKClgOiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGdhbWUgYm9hcmQuXG4gKiAgIC0gYHBsYWNlU2hpcChzaGlwLCB4LCB5LCBvcmllbnRhdGlvbilgOiBQbGFjZXMgYSBzaGlwIG9uIHRoZSBnYW1lIGJvYXJkIGF0IHRoZSBzcGVjaWZpZWQgY29vcmRpbmF0ZXMgYW5kIG9yaWVudGF0aW9uLlxuICogICAtIGByZWNlaXZlQXR0YWNrKHgsIHkpYDogSGFuZGxlcyBhbiBhdHRhY2sgb24gdGhlIGdhbWUgYm9hcmQgYXQgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcy5cbiAqICAgLSBgZ2V0TWlzc2VkQXR0YWNrcygpYDogUmV0cmlldmVzIHRoZSBjb29yZGluYXRlcyBvZiBtaXNzZWQgYXR0YWNrcyBvbiB0aGUgZ2FtZSBib2FyZC5cbiAqICAgLSBgZ2V0SGl0cygpYDogUmV0cmlldmVzIHRoZSBjb29yZGluYXRlcyBvZiBhbGwgY2VsbHMgdGhhdCBoYXZlIGJlZW4gaGl0LlxuICogICAtIGBhcmVBbGxTaGlwc1N1bmsoKWA6IENoZWNrcyBpZiBhbGwgcGxhY2VkIHNoaXBzIGFyZSBzdW5rLlxuICogICAtIGBhbGxTaGlwc1BsYWNlZCgpYDogQ2hlY2tzIGlmIGFsbCBzaGlwcyBoYXZlIGJlZW4gcGxhY2VkIG9uIHRoZSBnYW1lIGJvYXJkLlxuICovXG5cbmV4cG9ydCBjb25zdCBHYW1lYm9hcmQgPSAoc2l6ZSA9IEJPQVJEX1NJWkUsIHNoaXBzID0gW10pID0+IHtcbiAgLy8gKiBQcml2YXRlIFZhcmlhYmxlc1xuICBsZXQgYm9hcmQgPSBbXTtcbiAgbGV0IHBsYWNlZFNoaXBzID0gW107XG4gIGxldCBoaXRzID0gW107XG4gIGxldCBtaXNzZXMgPSBbXTtcbiAgbGV0IGFsbEF0dGFja3MgPSBuZXcgU2V0KCk7XG5cbiAgLy8gKiBJbml0aWFsaXplXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgZ2FtZSBib2FyZCBieSBjcmVhdGluZyBhIG5ldyBib2FyZCB3aXRoIHRoZSBzcGVjaWZpZWQgc2l6ZSBhbmQgY2VsbCBjcmVhdGlvbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBuYW1lIGluaXRpYWxpemVCb2FyZFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGNvbnN0IGluaXRpYWxpemVCb2FyZCA9ICgpID0+IHtcbiAgICBib2FyZCA9IGNyZWF0ZUJvYXJkKHNpemUsIGNyZWF0ZUNlbGwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIGdhbWUgYm9hcmQgdG8gaXRzIGluaXRpYWwgc3RhdGUuXG4gICAqIENsZWFycyBhbGwgcGxhY2VkIHNoaXBzLCBoaXRzLCBtaXNzZXMsIGFuZCBhbGwgcmVjb3JkZWQgYXR0YWNrcy5cbiAgICovXG4gIGNvbnN0IHJlc2V0ID0gKCkgPT4ge1xuICAgIGluaXRpYWxpemVCb2FyZCgpO1xuICAgIHBsYWNlZFNoaXBzID0gW107XG4gICAgaGl0cyA9IFtdO1xuICAgIG1pc3NlcyA9IFtdO1xuICAgIGFsbEF0dGFja3MuY2xlYXIoKTtcbiAgfTtcblxuICBjb25zdCBnZXRCb2FyZCA9ICgpID0+IGJvYXJkO1xuICBjb25zdCBnZXRTaXplID0gKCkgPT4gc2l6ZTtcblxuICAvLyAqIFBsYWNpbmcgU2hpcHNcbiAgY29uc3QgZ2V0U2hpcHMgPSAoKSA9PiBzaGlwcztcbiAgY29uc3QgZ2V0UGxhY2VkU2hpcHMgPSAoKSA9PiBwbGFjZWRTaGlwcztcbiAgLyoqXG4gICAqIENoZWNrcyBpZiBhbGwgc2hpcHMgaGF2ZSBiZWVuIHBsYWNlZCBvbiB0aGUgZ2FtZSBib2FyZC5cbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IGNvbnRhaW5pbmc6XG4gICAqIC0gYGFsbFBsYWNlZGAge2Jvb2xlYW59OiBUcnVlIGlmIHRoZSB0b3RhbCBudW1iZXIgb2YgcGxhY2VkIHNoaXAgY2VsbHMgbWF0Y2hlcyB0aGUgZXhwZWN0ZWQgdG90YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogLSBgcGxhY2VkYCB7bnVtYmVyfTogVGhlIGFjdHVhbCBudW1iZXIgb2Ygc2hpcCBjZWxscyBwbGFjZWQgb24gdGhlIGJvYXJkLlxuICAgKi9cbiAgY29uc3QgYWxsU2hpcHNQbGFjZWQgPSAoKSA9PiB7XG4gICAgY29uc3QgZXhwZWN0ZWRUb3RhbCA9IHNoaXBzLnJlZHVjZSgodG90YWwsIHNoaXApID0+IHRvdGFsICsgc2hpcC5sZW5ndGgsIDApO1xuXG4gICAgbGV0IGFjdHVhbFRvdGFsID0gMDtcbiAgICBib2FyZC5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgIHJvdy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgIGlmIChjZWxsLnNoaXAgIT09IG51bGwpIHtcbiAgICAgICAgICBhY3R1YWxUb3RhbCsrO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiB7IGFsbFBsYWNlZDogYWN0dWFsVG90YWwgPT09IGV4cGVjdGVkVG90YWwsIHBsYWNlZDogYWN0dWFsVG90YWwgfTtcbiAgfTtcblxuICAvLyA/IFBsYWNpbmcgU2hpcHNcbiAgLyoqXG4gICAqIFBsYWNlcyBhIHNoaXAgb24gdGhlIGdhbWUgYm9hcmQgYXQgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcyBhbmQgb3JpZW50YXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzaGlwIC0gVGhlIHNoaXAgb2JqZWN0IHRvIGJlIHBsYWNlZCBvbiB0aGUgYm9hcmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHgtY29vcmRpbmF0ZSB3aGVyZSB0aGUgc2hpcCdzIHBsYWNlbWVudCBzdGFydHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHktY29vcmRpbmF0ZSB3aGVyZSB0aGUgc2hpcCdzIHBsYWNlbWVudCBzdGFydHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmllbnRhdGlvbiAtIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUgc2hpcCwgZWl0aGVyICdIT1JJWk9OVEFMJyBvciAnVkVSVElDQUwnLlxuICAgKi9cbiAgY29uc3QgcGxhY2VTaGlwT25Cb2FyZCA9IChzaGlwLCB4LCB5LCBvcmllbnRhdGlvbikgPT4ge1xuICAgIGNvbnN0IHNoaXBMZW5ndGggPSBzaGlwLmdldExlbmd0aCgpO1xuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHBvc1ggPSBvcmllbnRhdGlvbiA9PT0gT1JJRU5UQVRJT05TLkhPUklaT05UQUwgPyB4ICsgaSA6IHg7XG4gICAgICBjb25zdCBwb3NZID0gb3JpZW50YXRpb24gPT09IE9SSUVOVEFUSU9OUy5WRVJUSUNBTCA/IHkgKyBpIDogeTtcblxuICAgICAgYm9hcmRbcG9zWV1bcG9zWF0uc2hpcCA9IHNoaXA7XG4gICAgICBib2FyZFtwb3NZXVtwb3NYXS5zaGlwVHlwZSA9IHNoaXAuZ2V0VHlwZSgpO1xuICAgICAgYm9hcmRbcG9zWV1bcG9zWF0uc3RhdHVzID0gQ0VMTF9TVEFUVVMuU0hJUDtcbiAgICAgIHBvc2l0aW9ucy5wdXNoKHsgeDogcG9zWCwgeTogcG9zWSB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXBsYWNlZFNoaXBzLmluY2x1ZGVzKHNoaXApKSB7XG4gICAgICBwbGFjZWRTaGlwcy5wdXNoKHsgc2hpcCwgcG9zaXRpb25zIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUGxhY2VzIGEgc2hpcCBvbiB0aGUgZ2FtZWJvYXJkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2hpcCAtIFRoZSBzaGlwIG9iamVjdCB0byBiZSBwbGFjZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHgtY29vcmRpbmF0ZSB3aGVyZSB0aGUgc2hpcCdzIGhlYWQgd2lsbCBiZSBwbGFjZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHktY29vcmRpbmF0ZSB3aGVyZSB0aGUgc2hpcCdzIGhlYWQgd2lsbCBiZSBwbGFjZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmllbnRhdGlvbiAtIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUgc2hpcCAoJ2hvcml6b250YWwnIG9yICd2ZXJ0aWNhbCcpLlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNoaXAgcGxhY2VtZW50IGlzIGludmFsaWQsIG91dCBvZiBib3VuZHMsIG9yIG92ZXJsYXBzIHdpdGggYW5vdGhlciBzaGlwLlxuICAgKi9cbiAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIHgsIHksIG9yaWVudGF0aW9uKSA9PiB7XG4gICAgdmFsaWRhdGVTaGlwUGxhY2VtZW50KHNoaXAsIHgsIHksIG9yaWVudGF0aW9uKTtcbiAgICBjaGVja091dE9mQm91bmRzKHNoaXAsIHgsIHksIG9yaWVudGF0aW9uKTtcbiAgICBjaGVja092ZXJsYXAoc2hpcCwgeCwgeSwgb3JpZW50YXRpb24pO1xuICAgIHBsYWNlU2hpcE9uQm9hcmQoc2hpcCwgeCwgeSwgb3JpZW50YXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSYW5kb21seSBwbGFjZXMgc2hpcHMgb24gdGhlIGdhbWVib2FyZC5cbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiBhdHRlbXB0cyB0byBwbGFjZSBlYWNoIHNoaXAgaW4gdGhlIGBzaGlwc2AgYXJyYXkgb24gdGhlIGdhbWVib2FyZFxuICAgKiBhdCByYW5kb20gcG9zaXRpb25zIGFuZCBvcmllbnRhdGlvbnMuIEl0IGVuc3VyZXMgdGhhdCBzaGlwcyBkbyBub3Qgb3ZlcmxhcCBhbmRcbiAgICogZml0IHdpdGhpbiB0aGUgZ2FtZWJvYXJkIGJvdW5kYXJpZXMuIElmIGEgc2hpcCBjYW5ub3QgYmUgcGxhY2VkIGFmdGVyIGEgbWF4aW11bVxuICAgKiBudW1iZXIgb2YgYXR0ZW1wdHMsIGFuIGVycm9yIGlzIHRocm93bi5cbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9IElmIG5vIHNoaXBzIGFyZSBwcm92aWRlZCBmb3IgcmFuZG9tIHBsYWNlbWVudC5cbiAgICogQHRocm93cyB7RXJyb3J9IElmIGEgc2hpcCBjYW5ub3QgYmUgcGxhY2VkIGFmdGVyIHRoZSBtYXhpbXVtIG51bWJlciBvZiBhdHRlbXB0cy5cbiAgICovXG4gIGNvbnN0IHBsYWNlU2hpcHNSYW5kb21seSA9ICgpID0+IHtcbiAgICBpZiAoIXNoaXBzIHx8ICFBcnJheS5pc0FycmF5KHNoaXBzKSB8fCBzaGlwcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHNoaXBzIHByb3ZpZGVkIGZvciByYW5kb20gcGxhY2VtZW50XCIpO1xuICAgIH1cblxuICAgIHZhbGlkYXRlU2hpcHNDYW5GaXQoKTtcblxuICAgIGNvbnN0IG9yaWVudGF0aW9ucyA9IFtPUklFTlRBVElPTlMuSE9SSVpPTlRBTCwgT1JJRU5UQVRJT05TLlZFUlRJQ0FMXTtcbiAgICBjb25zdCBNQVhfQVRURU1QVFMgPSAxMDA7IC8vIFByZXZlbnQgaW5maW5pdGUgbG9vcHNcblxuICAgIGZvciAobGV0IGJhdHRsZXNoaXAgb2Ygc2hpcHMpIHtcbiAgICAgIGxldCBwbGFjZWQgPSBmYWxzZTtcbiAgICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgICBjb25zdCBzaGlwID0gU2hpcChiYXR0bGVzaGlwLnR5cGUsIGJhdHRsZXNoaXAubGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCFwbGFjZWQgJiYgYXR0ZW1wdHMgPCBNQVhfQVRURU1QVFMpIHtcbiAgICAgICAgYXR0ZW1wdHMrKztcblxuICAgICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2l6ZSk7XG4gICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzaXplKTtcbiAgICAgICAgY29uc3Qgb3JpZW50YXRpb24gPVxuICAgICAgICAgIG9yaWVudGF0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBvcmllbnRhdGlvbnMubGVuZ3RoKV07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBwbGFjZVNoaXAoc2hpcCwgeCwgeSwgb3JpZW50YXRpb24pO1xuICAgICAgICAgIHBsYWNlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9yIGFuZCB0cnkgYWdhaW5cbiAgICAgICAgICBpZiAoYXR0ZW1wdHMgPj0gTUFYX0FUVEVNUFRTKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmFibGUgdG8gcGxhY2Ugc2hpcCBsZW5ndGggJHtiYXR0bGVzaGlwLmxlbmd0aH0gYWZ0ZXIgJHtNQVhfQVRURU1QVFN9IGF0dGVtcHRzYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gPyBFcnJvciBDaGVja2luZ1xuICAvKipcbiAgICogVmFsaWRhdGVzIHdoZXRoZXIgdGhlIHRvdGFsIHNoaXAgc3BhY2UgZml0cyB3aXRoaW4gdGhlIGJvYXJkLlxuICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHNoaXBzIC0gVGhlIGFycmF5IG9mIHNoaXBzIHRvIGJlIHBsYWNlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGJvYXJkU2l6ZSAtIFRoZSB0b3RhbCBib2FyZCBzaXplLlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNoaXBzIGNhbm5vdCBmaXQgb24gdGhlIGJvYXJkLlxuICAgKi9cbiAgY29uc3QgdmFsaWRhdGVTaGlwc0NhbkZpdCA9ICgpID0+IHtcbiAgICBjb25zdCB0b3RhbFNoaXBTcGFjZSA9IHNoaXBzLnJlZHVjZSgoc3VtLCBzaGlwKSA9PiBzdW0gKyBzaGlwLmxlbmd0aCwgMCk7XG4gICAgY29uc3QgYm9hcmRTcGFjZSA9IHNpemUgKiBzaXplO1xuXG4gICAgaWYgKHRvdGFsU2hpcFNwYWNlID4gYm9hcmRTcGFjZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgU2hpcHMgcmVxdWlyZSAke3RvdGFsU2hpcFNwYWNlfSBzcGFjZXMgYnV0IGJvYXJkIG9ubHkgaGFzICR7Ym9hcmRTcGFjZX0gc3BhY2VzYFxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGUgcGxhY2VtZW50IG9mIGEgc2hpcCBvbiB0aGUgZ2FtZWJvYXJkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2hpcCAtIFRoZSBzaGlwIG9iamVjdCB0byBiZSBwbGFjZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHgtY29vcmRpbmF0ZSB3aGVyZSB0aGUgc2hpcCBpcyB0byBiZSBwbGFjZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHktY29vcmRpbmF0ZSB3aGVyZSB0aGUgc2hpcCBpcyB0byBiZSBwbGFjZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmllbnRhdGlvbiAtIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUgc2hpcCwgZWl0aGVyICdIT1JJWk9OVEFMJyBvciAnVkVSVElDQUwnLlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBzaGlwIGlzIGludmFsaWQuXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIG9yaWVudGF0aW9uIGlzIGludmFsaWQuXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGNvb3JkaW5hdGVzIGFyZSBpbnZhbGlkLlxuICAgKi9cbiAgY29uc3QgdmFsaWRhdGVTaGlwUGxhY2VtZW50ID0gKHNoaXAsIHgsIHksIG9yaWVudGF0aW9uKSA9PiB7XG4gICAgaWYgKCFzaGlwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuSU5WQUxJRF9TSElQKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBvcmllbnRhdGlvbiAhPT0gT1JJRU5UQVRJT05TLkhPUklaT05UQUwgJiZcbiAgICAgIG9yaWVudGF0aW9uICE9PSBPUklFTlRBVElPTlMuVkVSVElDQUxcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5JTlZBTElEX09SSUVOVEFUSU9OKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhTnVtYmVyLmlzSW50ZWdlcih4KSB8fFxuICAgICAgIU51bWJlci5pc0ludGVnZXIoeSkgfHxcbiAgICAgIHggPCAwIHx8XG4gICAgICB4ID49IHNpemUgfHxcbiAgICAgIHkgPCAwIHx8XG4gICAgICB5ID49IHNpemVcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5JTlZBTElEX0NPT1JESU5BVEVTKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgc2hpcCBwbGFjZW1lbnQgaXMgb3V0IG9mIGJvdW5kcyBvbiB0aGUgZ2FtZWJvYXJkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2hpcCAtIFRoZSBzaGlwIG9iamVjdCB0byBiZSBwbGFjZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnRpbmcgcG9zaXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnRpbmcgcG9zaXRpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmllbnRhdGlvbiAtIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUgc2hpcCAoZWl0aGVyICdIT1JJWk9OVEFMJyBvciAnVkVSVElDQUwnKS5cbiAgICogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpZiB0aGUgc2hpcCBwbGFjZW1lbnQgaXMgb3V0IG9mIGJvdW5kcyBob3Jpem9udGFsbHkgb3IgdmVydGljYWxseS5cbiAgICovXG4gIGNvbnN0IGNoZWNrT3V0T2ZCb3VuZHMgPSAoc2hpcCwgeCwgeSwgb3JpZW50YXRpb24pID0+IHtcbiAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKTtcblxuICAgIGlmIChvcmllbnRhdGlvbiA9PT0gT1JJRU5UQVRJT05TLkhPUklaT05UQUwgJiYgeCArIHNoaXBMZW5ndGggPiBzaXplKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuT1VUX09GX0JPVU5EU19IT1JJWk9OVEFMKTtcbiAgICB9XG4gICAgaWYgKG9yaWVudGF0aW9uID09PSBPUklFTlRBVElPTlMuVkVSVElDQUwgJiYgeSArIHNoaXBMZW5ndGggPiBzaXplKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuT1VUX09GX0JPVU5EU19WRVJUSUNBTCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgcGxhY2luZyBhIHNoaXAgYXQgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcyBhbmQgb3JpZW50YXRpb24gd2lsbCBvdmVybGFwIHdpdGggYW55IGV4aXN0aW5nIHNoaXBzIG9uIHRoZSBib2FyZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHNoaXAgLSBUaGUgc2hpcCBvYmplY3QgdG8gYmUgcGxhY2VkLlxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSB4LWNvb3JkaW5hdGUgd2hlcmUgdGhlIHNoaXAncyBwbGFjZW1lbnQgc3RhcnRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSB5LWNvb3JkaW5hdGUgd2hlcmUgdGhlIHNoaXAncyBwbGFjZW1lbnQgc3RhcnRzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3JpZW50YXRpb24gLSBUaGUgb3JpZW50YXRpb24gb2YgdGhlIHNoaXAsIGVpdGhlciAnSE9SSVpPTlRBTCcgb3IgJ1ZFUlRJQ0FMJy5cbiAgICogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpZiB0aGUgc2hpcCBvdmVybGFwcyB3aXRoIGFub3RoZXIgc2hpcCBvbiB0aGUgYm9hcmQuXG4gICAqL1xuICBjb25zdCBjaGVja092ZXJsYXAgPSAoc2hpcCwgeCwgeSwgb3JpZW50YXRpb24pID0+IHtcbiAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwb3NYID0gb3JpZW50YXRpb24gPT09IE9SSUVOVEFUSU9OUy5IT1JJWk9OVEFMID8geCArIGkgOiB4O1xuICAgICAgY29uc3QgcG9zWSA9IG9yaWVudGF0aW9uID09PSBPUklFTlRBVElPTlMuVkVSVElDQUwgPyB5ICsgaSA6IHk7XG5cbiAgICAgIGlmIChib2FyZFtwb3NZXVtwb3NYXS5zaGlwICE9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5PVkVSTEFQUElOR19TSElQKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gKiBBdHRhY2tzXG4gIGNvbnN0IGdldEhpdHMgPSAoKSA9PiBoaXRzO1xuICBjb25zdCBnZXRNaXNzZWRBdHRhY2tzID0gKCkgPT4gbWlzc2VzO1xuXG4gIC8qKlxuICAgKiBSZWNlaXZlcyBhbiBhdHRhY2sgYXQgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcyBvbiB0aGUgZ2FtZSBib2FyZC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBhdHRhY2suXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgYXR0YWNrLlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNvb3JkaW5hdGVzIGFyZSBvdXQgb2YgYm91bmRzLlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNlbGwgaGFzIGFscmVhZHkgYmVlbiBhdHRhY2tlZC5cbiAgICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiB0aGUgYXR0YWNrLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSByZXR1cm4ucmVzdWx0IC0gVGhlIHN0YXR1cyBvZiB0aGUgY2VsbCBhZnRlciB0aGUgYXR0YWNrIChISVQgb3IgTUlTUykuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gcmV0dXJuLnNoaXBUeXBlIC0gVGhlIHR5cGUgb2YgdGhlIHNoaXAgdGhhdCB3YXMgaGl0LCBvciBudWxsIGlmIG5vIHNoaXAgd2FzIGhpdC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IHJldHVybi5zdW5rIC0gV2hldGhlciB0aGUgc2hpcCB0aGF0IHdhcyBoaXQgaXMgc3Vuay5cbiAgICogQHJldHVybnMge09iamVjdH0gcmV0dXJuLmNvb3JkaW5hdGVzIC0gVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBhdHRhY2suXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IHJldHVybi5jb29yZGluYXRlcy54IC0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgYXR0YWNrLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSByZXR1cm4uY29vcmRpbmF0ZXMueSAtIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIGF0dGFjay5cbiAgICovXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoeCwgeSkgPT4ge1xuICAgIGlmICh4IDwgMCB8fCB4ID49IHNpemUgfHwgeSA8IDAgfHwgeSA+PSBzaXplKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuSU5WQUxJRF9DT09SRElOQVRFUyk7XG4gICAgfVxuICAgIGNvbnN0IGNlbGwgPSBib2FyZFt5XVt4XTtcbiAgICBpZiAoY2VsbC5oYXNCZWVuQXR0YWNrZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5BTFJFQURZX0FUVEFDS0VEKTtcbiAgICB9XG5cbiAgICBjZWxsLmhhc0JlZW5BdHRhY2tlZCA9IHRydWU7XG5cbiAgICBpZiAoY2VsbC5zaGlwICE9PSBudWxsKSB7XG4gICAgICBjZWxsLnNoaXAuaGl0KCk7XG4gICAgICBjZWxsLnN0YXR1cyA9IENFTExfU1RBVFVTLkhJVDtcbiAgICAgIGhpdHMucHVzaCh7IHgsIHkgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN1bHQ6IENFTExfU1RBVFVTLkhJVCxcbiAgICAgICAgc2hpcFR5cGU6IGNlbGwuc2hpcFR5cGUsXG4gICAgICAgIHN1bms6IGNlbGwuc2hpcC5pc1N1bmsoKSxcbiAgICAgICAgY29vcmRpbmF0ZXM6IHsgeCwgeSB9LFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2VsbC5zdGF0dXMgPSBDRUxMX1NUQVRVUy5NSVNTO1xuICAgICAgbWlzc2VzLnB1c2goeyB4LCB5IH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiBDRUxMX1NUQVRVUy5NSVNTLFxuICAgICAgICBzaGlwVHlwZTogbnVsbCxcbiAgICAgICAgc3VuazogZmFsc2UsXG4gICAgICAgIGNvb3JkaW5hdGVzOiB7IHgsIHkgfSxcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcyBvbiB0aGUgZ2FtZSBib2FyZCBoYXZlIGJlZW4gYXR0YWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHgtY29vcmRpbmF0ZSBvbiB0aGUgZ2FtZSBib2FyZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBUaGUgeS1jb29yZGluYXRlIG9uIHRoZSBnYW1lIGJvYXJkLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBSZXR1cm5zIHRydWUgaWYgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcyBoYXZlIGJlZW4gYXR0YWNrZWQsIG90aGVyd2lzZSBmYWxzZS5cbiAgICovXG4gIGNvbnN0IGhhc0JlZW5BdHRhY2tlZCA9ICh4LCB5KSA9PiBib2FyZFt5XVt4XS5oYXNCZWVuQXR0YWNrZWQ7XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgYXR0YWNrIGNvb3JkaW5hdGVzLCBpbmNsdWRpbmcgaGl0cyBhbmQgbWlzc2VzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7U2V0PHN0cmluZz59IEEgc2V0IGNvbnRhaW5pbmcgdGhlIGNvb3JkaW5hdGVzIG9mIGFsbCBhdHRhY2tzIGluIHRoZSBmb3JtYXQgXCJ4LHlcIi5cbiAgICovXG4gIGNvbnN0IGdldEFsbEF0dGFja3MgPSAoKSA9PiB7XG4gICAgaGl0cy5mb3JFYWNoKCh7IHgsIHkgfSkgPT4ge1xuICAgICAgYWxsQXR0YWNrcy5hZGQoYCR7eH0sJHt5fWApO1xuICAgIH0pO1xuXG4gICAgbWlzc2VzLmZvckVhY2goKHsgeCwgeSB9KSA9PiB7XG4gICAgICBhbGxBdHRhY2tzLmFkZChgJHt4fSwke3l9YCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYWxsQXR0YWNrcztcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGFsbCBwbGFjZWQgc2hpcHMgYXJlIHN1bmsuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGFsbCBwbGFjZWQgc2hpcHMgYXJlIHN1bmssIGZhbHNlIG90aGVyd2lzZS5cbiAgICovXG4gIGNvbnN0IGFyZUFsbFNoaXBzU3VuayA9ICgpID0+IHtcbiAgICBpZiAocGxhY2VkU2hpcHMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHBsYWNlZFNoaXBzLmV2ZXJ5KChzaGlwKSA9PiBzaGlwLnNoaXAuaXNTdW5rKCkpO1xuICB9O1xuXG4gIGNvbnN0IGdldFN1bmtTaGlwc0NvdW50ID0gKCkgPT4ge1xuICAgIHJldHVybiBwbGFjZWRTaGlwcy5yZWR1Y2UoKGNvdW50LCB7IHNoaXAgfSkgPT4ge1xuICAgICAgcmV0dXJuIGNvdW50ICsgKHNoaXAuaXNTdW5rKCkgPyAxIDogMCk7XG4gICAgfSwgMCk7XG4gIH07XG5cbiAgLy8gPyBJbnN0YW50aWF0ZSB0aGUgZ2FtZWJvYXJkIG9iamVjdFxuICBpbml0aWFsaXplQm9hcmQoKTtcbiAgcmV0dXJuIHtcbiAgICBnZXRCb2FyZCxcbiAgICBnZXRTaXplLFxuICAgIGdldFNoaXBzLFxuICAgIGdldFBsYWNlZFNoaXBzLFxuICAgIHBsYWNlU2hpcCxcbiAgICBwbGFjZVNoaXBzUmFuZG9tbHksXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBoYXNCZWVuQXR0YWNrZWQsXG4gICAgZ2V0QWxsQXR0YWNrcyxcbiAgICBnZXRNaXNzZWRBdHRhY2tzLFxuICAgIGdldEhpdHMsXG4gICAgYXJlQWxsU2hpcHNTdW5rLFxuICAgIGFsbFNoaXBzUGxhY2VkLFxuICAgIHJlc2V0LFxuICAgIGdldFN1bmtTaGlwc0NvdW50LFxuICB9O1xufTtcbiIsImV4cG9ydCBjb25zdCBCQVRUTEVTSElQUyA9IFtcbiAgeyB0eXBlOiBcIkNhcnJpZXJcIiwgbGVuZ3RoOiA1IH0sXG4gIHsgdHlwZTogXCJCYXR0bGVzaGlwXCIsIGxlbmd0aDogNCB9LFxuICB7IHR5cGU6IFwiQ3J1aXNlclwiLCBsZW5ndGg6IDMgfSxcbiAgeyB0eXBlOiBcIlN1Ym1hcmluZVwiLCBsZW5ndGg6IDMgfSxcbiAgeyB0eXBlOiBcIkRlc3Ryb3llclwiLCBsZW5ndGg6IDIgfSxcbl07XG4iLCJleHBvcnQgY29uc3QgQ1NTX0NMQVNTRVMgPSB7XG4gIEJPQVJEOiBcImJvYXJkXCIsXG4gIEJPQVJEX1JPVzogXCJib2FyZC1yb3dcIixcbiAgQk9BUkRfQ0VMTDogXCJib2FyZC1jZWxsXCIsXG4gIFBMQVlFUl9TRUNUSU9OOiBcInBsYXllci1zZWN0aW9uXCIsXG4gIE1FU1NBR0U6IFwibWVzc2FnZVwiLFxuICBDVVJSRU5UX1BMQVlFUjogXCJjdXJyZW50LXBsYXllclwiLFxuICBTQ09SRTogXCJzY29yZVwiLFxuICBPVkVSTEFZOiBcIm92ZXJsYXlcIixcbiAgRElTQUJMRUQ6IFwiZGlzYWJsZWRcIixcbiAgSElHSExJR0hUOiBcImhpZ2hsaWdodFwiLCAvLyBBZGQgdGhpcyBmb3IgaW50ZXJhY3RpdmUgZWxlbWVudHMgbGlrZSBjdXJyZW50IHBsYXllcidzIGJvYXJkXG4gIFNISVA6IFwic2hpcFwiLFxuICBISVQ6IFwiaGl0XCIsXG4gIE1JU1M6IFwibWlzc1wiLFxuICBTVU5LOiBcInN1bmtcIixcbn07XG5cbmV4cG9ydCBjb25zdCBDU1NfSURTID0ge1xuICBNRVNTQUdFOiBcIm1lc3NhZ2VcIixcbiAgU0NPUkU6IFwic2NvcmVcIixcbiAgQ1VSUkVOVF9QTEFZRVI6IFwiY3VycmVudC1wbGF5ZXJcIixcbiAgUExBWUVSMV9CT0FSRDogXCJwbGF5ZXIxLWJvYXJkXCIsXG4gIFBMQVlFUjJfQk9BUkQ6IFwicGxheWVyMi1ib2FyZFwiLFxuICBHQU1FOiBcImdhbWVcIixcbiAgR0FNRV9PVkVSOiBcImdhbWUtb3ZlclwiLFxufTtcbiIsImltcG9ydCBcIi4vc3R5bGVzLmNzc1wiO1xuaW1wb3J0IHsgR2FtZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb21wb25lbnRzL2dhbWVDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSBcIi4vY29tcG9uZW50cy9nYW1lXCI7XG5pbXBvcnQgeyBVSSB9IGZyb20gXCIuL2NvbXBvbmVudHMvdWlcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL2NvbXBvbmVudHMvcGxheWVyXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2dhbWVib2FyZFwiO1xuaW1wb3J0IHsgQkFUVExFU0hJUFMgfSBmcm9tIFwiLi9oZWxwZXJzL2NvbnN0YW50cy9zaGlwQ29uc3RhbnRzXCI7XG5pbXBvcnQgeyBCT0FSRF9TSVpFIH0gZnJvbSBcIi4vaGVscGVycy9jb25zdGFudHMvYm9hcmRDb25zdGFudHNcIjtcbmltcG9ydCB7IFBMQVlFUlMgfSBmcm9tIFwiLi9oZWxwZXJzL2NvbnN0YW50cy9wbGF5ZXJDb25zdGFudHNcIjtcblxuLy8gQ3JlYXRlIHBsYXllcnMgZmlyc3RcbmNvbnN0IHBsYXllcjEgPSBQbGF5ZXIoXG4gIFBMQVlFUlMuUExBWUVSMS5UWVBFLFxuICBQTEFZRVJTLlBMQVlFUjEuTkFNRSxcbiAgUExBWUVSUy5QTEFZRVIxLklEXG4pO1xuXG5jb25zdCBwbGF5ZXIyID0gUGxheWVyKFxuICBQTEFZRVJTLlBMQVlFUjIuVFlQRSxcbiAgUExBWUVSUy5QTEFZRVIyLk5BTUUsXG4gIFBMQVlFUlMuUExBWUVSMi5JRFxuKTtcblxuLy8gQ3JlYXRlIGdhbWVib2FyZHNcbmNvbnN0IHBsYXllcjFCb2FyZCA9IEdhbWVib2FyZChCT0FSRF9TSVpFLCBbLi4uQkFUVExFU0hJUFNdKTtcbmNvbnN0IHBsYXllcjJCb2FyZCA9IEdhbWVib2FyZChCT0FSRF9TSVpFLCBbLi4uQkFUVExFU0hJUFNdKTtcblxuLy8gU2V0IGdhbWVib2FyZHMgZm9yIHBsYXllcnNcbnBsYXllcjEuc2V0R2FtZWJvYXJkKHBsYXllcjFCb2FyZCk7XG5wbGF5ZXIyLnNldEdhbWVib2FyZChwbGF5ZXIyQm9hcmQpO1xuXG4vLyBJbml0aWFsaXplIGNvcmUgY29tcG9uZW50cyB3aXRoIHBsYXllcnNcbmNvbnN0IHVpID0gVUkoKTtcbmNvbnN0IGdhbWUgPSBHYW1lKHBsYXllcjEsIHBsYXllcjIpO1xuXG4vLyBJbml0aWFsaXplIGdhbWUgY29udHJvbGxlciB3aXRoIGFsbCBkZXBlbmRlbmNpZXNcbmNvbnN0IGdhbWVDb250cm9sbGVyID0gR2FtZUNvbnRyb2xsZXIoXG4gIGdhbWUsXG4gIHVpLFxuICBbcGxheWVyMSwgcGxheWVyMl0sXG4gIFtwbGF5ZXIxQm9hcmQsIHBsYXllcjJCb2FyZF1cbik7XG5cbi8vIFN0YXJ0IHRoZSBnYW1lXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gIHRyeSB7XG4gICAgZ2FtZUNvbnRyb2xsZXIuc3RhcnRHYW1lKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzdGFydCBnYW1lOlwiLCBlcnJvcik7XG4gIH1cbn0pO1xuIiwiLy8gdWkuanNcbmltcG9ydCB7IENFTExfU1RBVFVTIH0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RhbnRzL2JvYXJkQ29uc3RhbnRzXCI7XG5pbXBvcnQgeyBDU1NfQ0xBU1NFUywgQ1NTX0lEUyB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0YW50cy9jc3NDb25zdGFudHNcIjtcbmltcG9ydCB7XG4gIEVSUk9SX01FU1NBR0VTLFxuICBTVUNDRVNTX01FU1NBR0VTLFxufSBmcm9tIFwiLi4vaGVscGVycy9jb25zdGFudHMvbWVzc2FnZUNvbnN0YW50c1wiO1xuXG5leHBvcnQgY29uc3QgVUkgPSAoKSA9PiB7XG4gIC8vIEhlbHBlciB0byBjcmVhdGUgYW5kIGFwcGVuZCBhbiBlbGVtZW50XG4gIGNvbnN0IGNyZWF0ZUVsZW1lbnQgPSAodGFnLCBvcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGlmIChvcHRpb25zLmlkKSBlbGVtZW50LmlkID0gb3B0aW9ucy5pZDtcbiAgICBpZiAob3B0aW9ucy5jbGFzc2VzKSBlbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4ub3B0aW9ucy5jbGFzc2VzKTtcbiAgICBpZiAob3B0aW9ucy50ZXh0Q29udGVudCkgZWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbnMudGV4dENvbnRlbnQ7XG4gICAgaWYgKG9wdGlvbnMucGFyZW50KSBvcHRpb25zLnBhcmVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfTtcblxuICAvLyBQcml2YXRlIG1ldGhvZHNcbiAgY29uc3Qgc2V0SGVhZGluZyA9ICgpID0+IHtcbiAgICBjcmVhdGVFbGVtZW50KFwiaDFcIiwge1xuICAgICAgdGV4dENvbnRlbnQ6IFwiQmF0dGxlc2hpcFwiLFxuICAgICAgcGFyZW50OiBkb2N1bWVudC5ib2R5LFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVBsYXllclNlY3Rpb24gPSAocGxheWVyLCBpbmRleCwgcGFyZW50KSA9PiB7XG4gICAgY29uc3QgcGxheWVyRGl2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc2VzOiBbXCJwbGF5ZXItc2VjdGlvblwiXSxcbiAgICAgIHBhcmVudCxcbiAgICB9KTtcblxuICAgIGNyZWF0ZUVsZW1lbnQoXCJoMlwiLCB7XG4gICAgICB0ZXh0Q29udGVudDogcGxheWVyLmdldE5hbWUoKSxcbiAgICAgIHBhcmVudDogcGxheWVyRGl2LFxuICAgIH0pO1xuXG4gICAgY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBpZDogYHBsYXllciR7aW5kZXggKyAxfS1ib2FyZGAsXG4gICAgICBjbGFzc2VzOiBbQ1NTX0NMQVNTRVMuQk9BUkRdLFxuICAgICAgcGFyZW50OiBwbGF5ZXJEaXYsXG4gICAgfSk7XG4gIH07XG5cbiAgLy8gUHVibGljIG1ldGhvZHNcbiAgY29uc3QgaW5pdFVJID0gKHBsYXllcjEsIHBsYXllcjIpID0+IHtcbiAgICBjb25zdCBwbGF5ZXJzID0gW3BsYXllcjEsIHBsYXllcjJdO1xuXG4gICAgc2V0SGVhZGluZygpO1xuXG4gICAgdXBkYXRlU2NvcmUocGxheWVyMSwgMCwgcGxheWVyMiwgMCk7XG5cbiAgICB1cGRhdGVDdXJyZW50UGxheWVyKHBsYXllcjEpO1xuXG4gICAgLy8gQ3JlYXRlIG1lc3NhZ2UgZGl2IGhlcmUsIGJlZm9yZSB0aGUgZ2FtZSBkaXZcbiAgICBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGlkOiBDU1NfSURTLk1FU1NBR0UsXG4gICAgICBwYXJlbnQ6IGRvY3VtZW50LmJvZHksXG4gICAgfSk7XG5cbiAgICBjb25zdCBnYW1lRGl2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBpZDogQ1NTX0lEUy5HQU1FLFxuICAgICAgcGFyZW50OiBkb2N1bWVudC5ib2R5LFxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIHBsYXllciBzZWN0aW9uc1xuICAgIHBsYXllcnMuZm9yRWFjaCgocGxheWVyLCBpbmRleCkgPT4ge1xuICAgICAgY3JlYXRlUGxheWVyU2VjdGlvbihwbGF5ZXIsIGluZGV4LCBnYW1lRGl2KTtcbiAgICB9KTtcblxuICAgIHJlbmRlckJvYXJkKHBsYXllcjEuZ2V0R2FtZWJvYXJkKCkuZ2V0Qm9hcmQoKSwgQ1NTX0lEUy5QTEFZRVIxX0JPQVJELCB0cnVlKTtcbiAgICByZW5kZXJCb2FyZChcbiAgICAgIHBsYXllcjIuZ2V0R2FtZWJvYXJkKCkuZ2V0Qm9hcmQoKSxcbiAgICAgIENTU19JRFMuUExBWUVSMl9CT0FSRCxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGRpc3BsYXlNZXNzYWdlKFNVQ0NFU1NfTUVTU0FHRVMuR0FNRV9TVEFSVEVEKTtcbiAgfTtcblxuICBjb25zdCByZXNldFVJID0gKCkgPT4ge1xuICAgIC8vIFJlbW92ZSB0aGUgZ2FtZSBjb250YWluZXIgd2l0aG91dCBhZmZlY3RpbmcgI21lc3NhZ2VcbiAgICBjb25zdCBnYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ1NTX0lEUy5HQU1FKTtcbiAgICBpZiAoZ2FtZUNvbnRhaW5lcikge1xuICAgICAgLy8gUmVtb3ZlIGFsbCBjaGlsZCBlbGVtZW50cyBleGNlcHQgI21lc3NhZ2VcbiAgICAgIGNvbnN0IG1lc3NhZ2VEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChDU1NfSURTLk1FU1NBR0UpO1xuICAgICAgZ2FtZUNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiOyAvLyBDbGVhciBhbGwgY2hpbGRyZW5cbiAgICAgIGlmIChtZXNzYWdlRGl2KSB7XG4gICAgICAgIGdhbWVDb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7IC8vIFJlLWFkZCBtZXNzYWdlRGl2IGlmIG5lY2Vzc2FyeVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlbW92ZSB0aGUgaGVhZGluZ1xuICAgIGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaDFcIik7XG4gICAgaWYgKGhlYWRpbmcpIHtcbiAgICAgIGhlYWRpbmcucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHRoZSBzY29yZSBkaXZcbiAgICBjb25zdCBzY29yZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKENTU19JRFMuU0NPUkUpO1xuICAgIGlmIChzY29yZURpdikge1xuICAgICAgc2NvcmVEaXYucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHRoZSBjdXJyZW50IHBsYXllciBkaXZcbiAgICBjb25zdCBjdXJyZW50UGxheWVyRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ1NTX0lEUy5DVVJSRU5UX1BMQVlFUik7XG4gICAgaWYgKGN1cnJlbnRQbGF5ZXJEaXYpIHtcbiAgICAgIGN1cnJlbnRQbGF5ZXJEaXYucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIG1lc3NhZ2UgZGl2J3MgdGV4dCBjb250ZW50IHdpdGhvdXQgcmVtb3ZpbmcgaXRcbiAgICBjb25zdCBtZXNzYWdlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ1NTX0lEUy5NRVNTQUdFKTtcbiAgICBpZiAobWVzc2FnZURpdikge1xuICAgICAgbWVzc2FnZURpdi50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAvLyBPcHRpb25hbGx5LCByZXNldCBvdGhlciBwcm9wZXJ0aWVzIGlmIG5lZWRlZFxuICAgICAgLy8gZS5nLiwgbWVzc2FnZURpdi5jbGFzc05hbWUgPSBcIm1lc3NhZ2UgaW5mb1wiO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZW5kZXJCb2FyZCA9IChib2FyZCwgY29udGFpbmVySWQsIGlzT3duQm9hcmQgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKTtcblxuICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuQ09OVEFJTkVSX05PVF9GT1VORCk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgdGhlIGN1cnJlbnQgaGFuZGxlQXR0YWNrIGZ1bmN0aW9uIGlmIGl0IGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nSGFuZGxlciA9IGNvbnRhaW5lci5faGFuZGxlQXR0YWNrO1xuXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIENsZWFyIHByZXZpb3VzIGNvbnRlbnRcblxuICAgIGJvYXJkLmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgY29uc3Qgcm93RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc2VzOiBbQ1NTX0NMQVNTRVMuQk9BUkRfUk9XXSxcbiAgICAgICAgcGFyZW50OiBjb250YWluZXIsXG4gICAgICB9KTtcblxuICAgICAgcm93LmZvckVhY2goKGNlbGwsIHgpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc2VzOiBbQ1NTX0NMQVNTRVMuQk9BUkRfQ0VMTF0sXG4gICAgICAgICAgcGFyZW50OiByb3dFbGVtZW50LFxuICAgICAgICB9KTtcblxuICAgICAgICBjZWxsRWxlbWVudC5kYXRhc2V0LnggPSB4O1xuICAgICAgICBjZWxsRWxlbWVudC5kYXRhc2V0LnkgPSB5O1xuXG4gICAgICAgIC8vIFNob3cgc2hpcHMgb25seSBvbiBwbGF5ZXIncyBvd24gYm9hcmRcbiAgICAgICAgaWYgKGNlbGwuc2hpcCAmJiBpc093bkJvYXJkKSB7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5TSElQKTtcblxuICAgICAgICAgIGlmIChjZWxsLnNoaXAuaXNTdW5rKCkpIHtcbiAgICAgICAgICAgIGNlbGxFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1NTX0NMQVNTRVMuU1VOSyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCBoaXQvbWlzcyBjbGFzc2VzXG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gQ0VMTF9TVEFUVVMuSElUKSB7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5ISVQpO1xuICAgICAgICAgIC8vIEFkZCBzdW5rIGNsYXNzIGlmIHRoZSBzaGlwIGlzIHN1bmsgKGZvciBib3RoIGJvYXJkcylcbiAgICAgICAgICBpZiAoY2VsbC5zaGlwICYmIGNlbGwuc2hpcC5pc1N1bmsoKSkge1xuICAgICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5TVU5LKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09IENFTExfU1RBVFVTLk1JU1MpXG4gICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5NSVNTKTtcblxuICAgICAgICAvLyBSZS1hZGQgY2xpY2sgaGFuZGxlciBpZiBpdCBleGlzdGVkXG4gICAgICAgIGlmIChleGlzdGluZ0hhbmRsZXIpIHtcbiAgICAgICAgICBjZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFjZWxsRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTX0NMQVNTRVMuSElUKSAmJlxuICAgICAgICAgICAgICAhY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENTU19DTEFTU0VTLk1JU1MpICYmXG4gICAgICAgICAgICAgICFjZWxsRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTX0NMQVNTRVMuU1VOSylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQm9hcmQgY2xpY2tlZDogJHt4fSwke3l9YCk7XG4gICAgICAgICAgICAgIGV4aXN0aW5nSGFuZGxlcih4LCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZGlzcGxheU1lc3NhZ2UgPSAobWVzc2FnZSwgdHlwZSA9IFwiaW5mb1wiLCBkdXJhdGlvbiA9IDApID0+IHtcbiAgICBjb25zdCBtZXNzYWdlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ1NTX0lEUy5NRVNTQUdFKTtcbiAgICBpZiAobWVzc2FnZURpdikge1xuICAgICAgbWVzc2FnZURpdi50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgICBtZXNzYWdlRGl2LmNsYXNzTmFtZSA9IGBtZXNzYWdlICR7dHlwZX1gO1xuXG4gICAgICBpZiAoZHVyYXRpb24gPiAwKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIG1lc3NhZ2VEaXYudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgIG1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gQ1NTX0NMQVNTRVMuTUVTU0FHRTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCB1cGRhdGVTY29yZSA9IChwbGF5ZXIxLCBwbGF5ZXIxU2NvcmUsIHBsYXllcjIsIHBsYXllcjJTY29yZSkgPT4ge1xuICAgIGlmICghcGxheWVyMSB8fCAhcGxheWVyMikge1xuICAgICAgY29uc29sZS5lcnJvcihcIk1pc3NpbmcgcGxheWVyIGluZm9ybWF0aW9uIGZvciBzY29yZSB1cGRhdGVcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNjb3JlRGl2ID1cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKENTU19JRFMuU0NPUkUpIHx8XG4gICAgICBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgaWQ6IENTU19JRFMuU0NPUkUsIHBhcmVudDogZG9jdW1lbnQuYm9keSB9KTtcblxuICAgIHNjb3JlRGl2LnRleHRDb250ZW50ID0gYCR7cGxheWVyMS5nZXROYW1lKCl9OiAke3BsYXllcjFTY29yZX0gfCAke3BsYXllcjIuZ2V0TmFtZSgpfTogJHtwbGF5ZXIyU2NvcmV9YDtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVDdXJyZW50UGxheWVyID0gKHBsYXllcikgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRQbGF5ZXJEaXYgPVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ1NTX0lEUy5DVVJSRU5UX1BMQVlFUikgfHxcbiAgICAgIGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBpZDogQ1NTX0lEUy5DVVJSRU5UX1BMQVlFUixcbiAgICAgICAgcGFyZW50OiBkb2N1bWVudC5ib2R5LFxuICAgICAgfSk7XG5cbiAgICBjdXJyZW50UGxheWVyRGl2LnRleHRDb250ZW50ID0gYEN1cnJlbnQgUGxheWVyOiAke3BsYXllci5nZXROYW1lKCl9YDtcbiAgICAvLyBIaWdobGlnaHQgdGhlIGN1cnJlbnQgcGxheWVyJ3Mgc2VjdGlvblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGxheWVyLXNlY3Rpb25cIikuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xuICAgICAgc2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFxuICAgICAgICBcImN1cnJlbnRcIixcbiAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKFwiaDJcIikudGV4dENvbnRlbnQgPT09IHBsYXllci5nZXROYW1lKClcbiAgICAgICk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYWRkQm9hcmRFdmVudExpc3RlbmVycyA9IChib2FyZENvbnRhaW5lcklkLCBjbGlja0hhbmRsZXIpID0+IHtcbiAgICBjb25zdCBib2FyZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvYXJkQ29udGFpbmVySWQpO1xuICAgIGlmICghYm9hcmRDb250YWluZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5DT05UQUlORVJfTk9UX0ZPVU5EKTtcbiAgICB9XG5cbiAgICBjb25zdCBjZWxscyA9IGJvYXJkQ29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ1NTX0NMQVNTRVMuQk9BUkRfQ0VMTCk7XG4gICAgQXJyYXkuZnJvbShjZWxscykuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKENTU19DTEFTU0VTLkhJVCkgJiZcbiAgICAgICAgICAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTX0NMQVNTRVMuTUlTUykgJiZcbiAgICAgICAgICAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTX0NMQVNTRVMuU1VOSylcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgeCA9IHBhcnNlSW50KGNlbGwuZGF0YXNldC54KTtcbiAgICAgICAgICBjb25zdCB5ID0gcGFyc2VJbnQoY2VsbC5kYXRhc2V0LnkpO1xuICAgICAgICAgIGNsaWNrSGFuZGxlcih4LCB5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZW5hYmxlQm9hcmRJbnRlcmFjdGlvbiA9IChib2FyZENvbnRhaW5lcklkKSA9PiB7XG4gICAgY29uc3QgYm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib2FyZENvbnRhaW5lcklkKTtcbiAgICBpZiAoIWJvYXJkQ29udGFpbmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuQ09OVEFJTkVSX05PVF9GT1VORCk7XG4gICAgfVxuICAgIGJvYXJkQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoQ1NTX0NMQVNTRVMuRElTQUJMRUQpO1xuICAgIGJvYXJkQ29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcImF1dG9cIjtcbiAgfTtcblxuICBjb25zdCBkaXNhYmxlQm9hcmRJbnRlcmFjdGlvbiA9IChib2FyZENvbnRhaW5lcklkKSA9PiB7XG4gICAgY29uc3QgYm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib2FyZENvbnRhaW5lcklkKTtcbiAgICBpZiAoIWJvYXJkQ29udGFpbmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuQ09OVEFJTkVSX05PVF9GT1VORCk7XG4gICAgfVxuICAgIGJvYXJkQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoQ1NTX0NMQVNTRVMuRElTQUJMRUQpO1xuICAgIGJvYXJkQ29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgfTtcblxuICBjb25zdCBzaG93R2FtZU92ZXJTY3JlZW4gPSAod2lubmVyTmFtZSkgPT4ge1xuICAgIC8vIEZpcnN0LCBjbGVhciBhbnkgZXhpc3RpbmcgZ2FtZSBvdmVyIG1lc3NhZ2VzXG4gICAgY29uc3QgZXhpc3RpbmdHYW1lT3ZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKENTU19JRFMuR0FNRV9PVkVSKTtcbiAgICBpZiAoZXhpc3RpbmdHYW1lT3Zlcikge1xuICAgICAgZXhpc3RpbmdHYW1lT3Zlci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBnYW1lT3ZlckRpdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgaWQ6IENTU19JRFMuR0FNRV9PVkVSLFxuICAgICAgY2xhc3NlczogW0NTU19DTEFTU0VTLk9WRVJMQVldLFxuICAgICAgcGFyZW50OiBkb2N1bWVudC5ib2R5LFxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIGEgY29udGFpbmVyIGZvciB0aGUgY29udGVudFxuICAgIGNvbnN0IGNvbnRlbnREaXYgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzZXM6IFtcImdhbWUtb3Zlci1jb250ZW50XCJdLFxuICAgICAgcGFyZW50OiBnYW1lT3ZlckRpdixcbiAgICB9KTtcblxuICAgIGNyZWF0ZUVsZW1lbnQoXCJoMlwiLCB7XG4gICAgICB0ZXh0Q29udGVudDogYCR7d2lubmVyTmFtZX0gd2lucyFgLFxuICAgICAgcGFyZW50OiBjb250ZW50RGl2LFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdGFydEJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgdGV4dENvbnRlbnQ6IFwiUGxheSBBZ2FpblwiLFxuICAgICAgY2xhc3NlczogW1wicGxheS1hZ2Fpbi1idXR0b25cIl0sXG4gICAgICBwYXJlbnQ6IGNvbnRlbnREaXYsXG4gICAgfSk7XG5cbiAgICByZXN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAvLyBMb2dpYyB0byByZXN0YXJ0IHRoZSBnYW1lXG4gICAgICBsb2NhdGlvbi5yZWxvYWQoKTsgLy8gU2ltcGxlIHdheSB0byByZWxvYWQgdGhlIHBhZ2VcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXRVSSxcbiAgICByZXNldFVJLFxuICAgIHJlbmRlckJvYXJkLFxuICAgIGRpc3BsYXlNZXNzYWdlLFxuICAgIHVwZGF0ZVNjb3JlLFxuICAgIHVwZGF0ZUN1cnJlbnRQbGF5ZXIsXG4gICAgYWRkQm9hcmRFdmVudExpc3RlbmVycyxcbiAgICBzaG93R2FtZU92ZXJTY3JlZW4sXG4gICAgZW5hYmxlQm9hcmRJbnRlcmFjdGlvbixcbiAgICBkaXNhYmxlQm9hcmRJbnRlcmFjdGlvbixcbiAgfTtcbn07XG4iLCIvLyAqIGdhbWUuanNcblxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgeyBFUlJPUl9NRVNTQUdFUyB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0YW50cy9tZXNzYWdlQ29uc3RhbnRzXCI7XG5pbXBvcnQgeyBCT0FSRF9TSVpFIH0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RhbnRzL2JvYXJkQ29uc3RhbnRzXCI7XG5cbmV4cG9ydCBjb25zdCBHYW1lID0gKHAxID0gbnVsbCwgcDIgPSBudWxsKSA9PiB7XG4gIGxldCBjdXJyZW50UGxheWVyO1xuICBsZXQgZ2FtZVN0YXJ0ZWQgPSBmYWxzZTtcbiAgbGV0IGdhbWVPdmVyID0gZmFsc2U7XG4gIGxldCBzY29yZSA9IHt9O1xuICBsZXQgcGxheWVyMSA9IHAxO1xuICBsZXQgcGxheWVyMiA9IHAyO1xuXG4gIGNvbnN0IHJlcXVpcmVkTWV0aG9kcyA9IFtcbiAgICBcImdldE5hbWVcIixcbiAgICBcImdldFR5cGVcIixcbiAgICBcImdldElkXCIsXG4gICAgXCJzZXRHYW1lYm9hcmRcIixcbiAgICBcImdldEdhbWVib2FyZFwiLFxuICBdO1xuXG4gIC8vIFByaXZhdGUgTWV0aG9kc1xuXG4gIC8qKlxuICAgKiBzZXRTY29yZVxuICAgKlxuICAgKiBzIG9yIHJlc2V0cyB0aGUgc2NvcmUgZm9yIGJvdGggY2xlYXJcbiAgICogeWVycy5cbiAgICovXG4gIGNvbnN0IHNldFNjb3JlID0gKCkgPT4ge1xuICAgIHNjb3JlW3BsYXllcjEuZ2V0TmFtZSgpXSA9IDA7XG4gICAgc2NvcmVbcGxheWVyMi5nZXROYW1lKCldID0gMDtcbiAgfTtcblxuICAvKipcbiAgICogdXBkYXRlU2NvcmVcbiAgICpcbiAgICogVXBkYXRlcyB0aGUgc2NvcmUgZm9yIHRoZSBnaXZlbiBwbGF5ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXIgLSBUaGUgcGxheWVyIHdob3NlIHNjb3JlIGlzIHRvIGJlIHVwZGF0ZWRcbiAgICovXG4gIGNvbnN0IHVwZGF0ZVNjb3JlID0gKHBsYXllcikgPT4ge1xuICAgIGNvbnN0IHBsYXllck5hbWUgPSBwbGF5ZXIuZ2V0TmFtZSgpO1xuICAgIHNjb3JlW3BsYXllck5hbWVdICs9IDE7XG4gIH07XG5cbiAgY29uc3QgdmFsaWRhdGVQbGF5ZXIgPSAocGxheWVyLCBwbGF5ZXJMYWJlbCkgPT4ge1xuICAgIHJlcXVpcmVkTWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgcGxheWVyW21ldGhvZF0gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cGxheWVyTGFiZWx9IGlzIG1pc3NpbmcgcmVxdWlyZWQgbWV0aG9kOiAke21ldGhvZH1gKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICAvLyBQdWJsaWMgTWV0aG9kc1xuICAvKipcbiAgICogaW5pdEdhbWVcbiAgICpcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGdhbWUgYnkgc2V0dGluZyB1cCBnYW1lIGJvYXJkcywgcGxheWVycyxcbiAgICogc2V0dGluZyB0aGUgY3VycmVudCBwbGF5ZXIsIGFuZCBpbml0aWFsaXppbmcgc2NvcmVzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGNvbnN0IGluaXRpYWxpemVHYW1lID0gKCkgPT4ge1xuICAgIGlmICghcGxheWVyMSB8fCAhcGxheWVyMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLlBMQVlFUl9SRVFVSVJFRCk7XG4gICAgfVxuICAgIGlmIChnYW1lU3RhcnRlZCkge1xuICAgICAgLy8gUG9zc2libHkgdGhyb3cgYW4gZXJyb3Igb3IganVzdCBpZ25vcmVcbiAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5BTFJFQURZX1NUQVJURUQpO1xuICAgIH1cblxuICAgIHZhbGlkYXRlUGxheWVyKHBsYXllcjEsIFwiUGxheWVyMVwiKTtcbiAgICB2YWxpZGF0ZVBsYXllcihwbGF5ZXIyLCBcIlBsYXllcjJcIik7XG5cbiAgICBpZiAocGxheWVyMS5nZXROYW1lKCkgPT09IHBsYXllcjIuZ2V0TmFtZSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuVU5JUVVFX05BTUUpO1xuICAgIH1cblxuICAgIGlmICghcGxheWVyMS5nZXRHYW1lYm9hcmQoKSB8fCAhcGxheWVyMi5nZXRHYW1lYm9hcmQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLkdBTUVCT0FSRFNfUkVRVUlSRUQpO1xuICAgIH1cblxuICAgIHNldEN1cnJlbnRQbGF5ZXIocGxheWVyMSk7XG4gICAgc2V0U2NvcmUoKTtcblxuICAgIHNldEdhbWVTdGFydGVkKHRydWUpO1xuICAgIHNldEdhbWVPdmVyKGZhbHNlKTtcblxuICAgIHJldHVybiB7IHBsYXllcjEsIHBsYXllcjIsIGN1cnJlbnRQbGF5ZXIgfTsgLy8gUmV0dXJuIGluaXRpYWwgc3RhdGUgZm9yIHRlc3RpbmdcbiAgfTtcblxuICAvKipcbiAgICogcmVzZXRHYW1lXG4gICAqXG4gICAqIFJlc2V0cyB0aGUgZ2FtZSBzdGF0ZSwgaW5jbHVkaW5nIGdhbWUgYm9hcmRzLCBwbGF5ZXJzLCBjdXJyZW50IHBsYXllcixcbiAgICogZ2FtZSBvdmVyIHN0YXR1cywgYW5kIHNjb3Jlcy5cbiAgICpcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBjb25zdCByZXNldEdhbWUgPSAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghcGxheWVyMSB8fCAhcGxheWVyMikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuR0FNRV9OT1RfSU5JVElBTElaRUQpO1xuICAgICAgfVxuICAgICAgc2V0Q3VycmVudFBsYXllcihwbGF5ZXIxKTtcbiAgICAgIHNldFNjb3JlKCk7XG5cbiAgICAgIHNldEdhbWVPdmVyKGZhbHNlKTtcbiAgICAgIHNldEdhbWVTdGFydGVkKGZhbHNlKTtcblxuICAgICAgLy8gUmVzZXQgcGxheWVyIGdhbWVib2FyZHNcbiAgICAgIC8vIFRPRE8gc2hvdWxkIHRoaXMgYmUgZG9uZSBpbiB0aGUgR2FtZUNvbnRyb2xsZXIgY2xhc3M/XG4gICAgICBwbGF5ZXIxLmdldEdhbWVib2FyZCgpLnJlc2V0KCk7XG4gICAgICBwbGF5ZXIyLmdldEdhbWVib2FyZCgpLnJlc2V0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJHYW1lIHJlc2V0IGVycm9yOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIGF0dGFja1xuICAgKlxuICAgKiBIYW5kbGVzIHRoZSBhdHRhY2sgYWN0aW9uIGJ5IHRoZSBjdXJyZW50IHBsYXllciBvbiB0aGUgb3Bwb25lbnQncyBnYW1lYm9hcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgYXR0YWNrXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgYXR0YWNrXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IC0gVGhlIHJlc3VsdCBvZiB0aGUgYXR0YWNrIChoaXQsIHN1bmspXG4gICAqL1xuICBjb25zdCBhdHRhY2sgPSAoeCwgeSkgPT4ge1xuICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5HQU1FX09WRVIpO1xuICAgIH1cblxuICAgIGNvbnN0IG9wcG9uZW50ID0gZ2V0T3Bwb25lbnQoKTtcbiAgICBjb25zdCBvcHBvbmVudEJvYXJkID0gb3Bwb25lbnQuZ2V0R2FtZWJvYXJkKCk7XG5cbiAgICAvLyBWYWxpZGF0ZSBjb29yZGluYXRlc1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiB4ICE9PSBcIm51bWJlclwiIHx8XG4gICAgICB0eXBlb2YgeSAhPT0gXCJudW1iZXJcIiB8fFxuICAgICAgeCA8IDAgfHxcbiAgICAgIHkgPCAwIHx8XG4gICAgICB4ID49IEJPQVJEX1NJWkUgfHxcbiAgICAgIHkgPj0gQk9BUkRfU0laRVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLklOVkFMSURfQ09PUkRJTkFURVMpO1xuICAgIH1cblxuICAgIGlmIChvcHBvbmVudEJvYXJkLmhhc0JlZW5BdHRhY2tlZCh4LCB5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLkFMUkVBRFlfQVRUQUNLRUQpO1xuICAgIH1cblxuICAgIGNvbnN0IGF0dGFja1Jlc3VsdCA9IG9wcG9uZW50Qm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcblxuICAgIC8vIFVwZGF0ZSBzY29yZSBpZiBzaGlwIGlzIHN1bmtcbiAgICBpZiAoYXR0YWNrUmVzdWx0LnN1bmspIHtcbiAgICAgIHVwZGF0ZVNjb3JlKGN1cnJlbnRQbGF5ZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGFsbCBzaGlwcyBhcmUgc3Vua1xuICAgIGlmIChvcHBvbmVudEJvYXJkLmFyZUFsbFNoaXBzU3VuaygpKSB7XG4gICAgICBzZXRHYW1lT3Zlcih0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0YWNrUmVzdWx0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBnZXRQbGF5ZXJzXG4gICAqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIHBsYXllcnMgaW4gdGhlIGdhbWUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheTxQbGF5ZXI+fSAtIFRoZSBwbGF5ZXJzXG4gICAqL1xuICBjb25zdCBnZXRQbGF5ZXJzID0gKCkgPT4ge1xuICAgIHJldHVybiBbcGxheWVyMSwgcGxheWVyMl07XG4gIH07XG5cbiAgLyoqXG4gICAqIGdldEN1cnJlbnRQbGF5ZXJcbiAgICpcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBwbGF5ZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQbGF5ZXJ9IC0gVGhlIGN1cnJlbnQgcGxheWVyXG4gICAqL1xuICBjb25zdCBnZXRDdXJyZW50UGxheWVyID0gKCkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50UGxheWVyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBzZXRDdXJyZW50UGxheWVyXG4gICAqIERpcmVjdCBzdGF0ZSBtYW5hZ2VtZW50IG1ldGhvZCwgcHJpbWFyaWx5IGZvciB0ZXN0aW5nL2luaXRpYWxpemF0aW9uXG4gICAqL1xuICBjb25zdCBzZXRDdXJyZW50UGxheWVyID0gKHBsYXllcikgPT4ge1xuICAgIGlmICghcGxheWVyIHx8ICFbcGxheWVyMSwgcGxheWVyMl0uaW5jbHVkZXMocGxheWVyKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLklOVkFMSURfUExBWUVSKTtcbiAgICB9XG4gICAgY3VycmVudFBsYXllciA9IHBsYXllcjtcbiAgfTtcblxuICAvKipcbiAgICogZ2V0T3Bwb25lbnRcbiAgICpcbiAgICogUmV0dXJucyB0aGUgb3Bwb25lbnQgb2YgdGhlIGN1cnJlbnQgcGxheWVyLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UGxheWVyfSAtIFRoZSBvcHBvbmVudCBwbGF5ZXJcbiAgICovXG4gIGNvbnN0IGdldE9wcG9uZW50ID0gKCkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50UGxheWVyID09PSBwbGF5ZXIxID8gcGxheWVyMiA6IHBsYXllcjE7XG4gIH07XG5cbiAgLyoqXG4gICAqIGlzR2FtZU92ZXJcbiAgICpcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBnYW1lIGlzIG92ZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFRydWUgaWYgZ2FtZSBpcyBvdmVyLCBlbHNlIGZhbHNlXG4gICAqL1xuICBjb25zdCBpc0dhbWVPdmVyID0gKCkgPT4ge1xuICAgIHJldHVybiBnYW1lT3ZlcjtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdhbWUgaGFzIHN0YXJ0ZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZ2FtZSBoYXMgc3RhcnRlZCwgb3RoZXJ3aXNlIGBmYWxzZWAuXG4gICAqL1xuICBjb25zdCBpc0dhbWVTdGFydGVkID0gKCkgPT4ge1xuICAgIHJldHVybiBnYW1lU3RhcnRlZDtcbiAgfTtcblxuICBjb25zdCBzZXRHYW1lU3RhcnRlZCA9IChzdGF0dXMpID0+IHtcbiAgICBnYW1lU3RhcnRlZCA9IHN0YXR1cztcbiAgfTtcblxuICAvKipcbiAgICogc2V0R2FtZU92ZXJcbiAgICpcbiAgICogTWFudWFsbHkgc2V0cyB0aGUgZ2FtZSBvdmVyIHN0YXR1cyAodXNlZnVsIGZvciB0ZXN0aW5nKS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBzdGF0dXMgLSBUaGUgbmV3IGdhbWUgb3ZlciBzdGF0dXNcbiAgICovXG4gIGNvbnN0IHNldEdhbWVPdmVyID0gKHN0YXR1cykgPT4ge1xuICAgIGdhbWVPdmVyID0gc3RhdHVzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBnZXRTY29yZVxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHNjb3JlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSAtIFRoZSBzY29yZSBvYmplY3RcbiAgICovXG4gIGNvbnN0IGdldFNjb3JlID0gKCkgPT4ge1xuICAgIC8vICh7Li4uc2NvcmV9KSByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBzY29yZSBvYmplY3RcbiAgICByZXR1cm4geyAuLi5zY29yZSB9O1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNvbXB1dGVyVHVybiA9ICgpID0+IHtcbiAgICBjb25zdCBjdXJyZW50UGxheWVyID0gZ2V0Q3VycmVudFBsYXllcigpO1xuICAgIGNvbnN0IG9wcG9uZW50ID0gZ2V0T3Bwb25lbnQoKTtcblxuICAgIGlmIChjdXJyZW50UGxheWVyLmdldFR5cGUoKSA9PT0gXCJjb21wdXRlclwiKSB7XG4gICAgICBjb25zdCBtb3ZlID0gY3VycmVudFBsYXllci5nZXROZXh0TW92ZShvcHBvbmVudC5nZXRHYW1lYm9hcmQoKSk7XG4gICAgICByZXR1cm4gYXR0YWNrKG1vdmUueCwgbW92ZS55KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIHN3aXRjaFR1cm5cbiAgICpcbiAgICogU3dpdGNoZXMgdGhlIGN1cnJlbnQgcGxheWVyIHRvIHRoZSBuZXh0IHBsYXllci5cbiAgICogVGhpcyBpcyBub3cgcHVibGljIHRvIGFsbG93IGZvciBiZXR0ZXIgVUkgc3RhdGUgbWFuYWdlbWVudC5cbiAgICpcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBjb25zdCBzd2l0Y2hUdXJuID0gKCkgPT4ge1xuICAgIGlmIChpc0dhbWVPdmVyKCkpIHJldHVybjtcbiAgICBjdXJyZW50UGxheWVyID0gY3VycmVudFBsYXllciA9PT0gcGxheWVyMSA/IHBsYXllcjIgOiBwbGF5ZXIxO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdGlhbGl6ZUdhbWUsXG4gICAgcmVzZXRHYW1lLFxuICAgIGdldFBsYXllcnMsXG4gICAgZ2V0Q3VycmVudFBsYXllcixcbiAgICBnZXRPcHBvbmVudCxcbiAgICBpc0dhbWVPdmVyLFxuICAgIGlzR2FtZVN0YXJ0ZWQsXG4gICAgZ2V0U2NvcmUsXG4gICAgYXR0YWNrLFxuICAgIHN3aXRjaFR1cm4sXG4gICAgaGFuZGxlQ29tcHV0ZXJUdXJuLFxuICB9O1xufTtcbiIsImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9nYW1lXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcbmltcG9ydCB7XG4gIENFTExfU1RBVFVTLFxuICBPUklFTlRBVElPTlMsXG4gIFBMQVlFUl9CT0FSRFMsXG59IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0YW50cy9ib2FyZENvbnN0YW50c1wiO1xuXG5pbXBvcnQge1xuICBFUlJPUl9NRVNTQUdFUyxcbiAgU1VDQ0VTU19NRVNTQUdFUyxcbn0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RhbnRzL21lc3NhZ2VDb25zdGFudHNcIjtcblxuaW1wb3J0IHsgUExBWUVSUyB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0YW50cy9wbGF5ZXJDb25zdGFudHNcIjtcbmltcG9ydCB7IEJBVFRMRVNISVBTIH0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RhbnRzL3NoaXBDb25zdGFudHNcIjtcblxuZXhwb3J0IGNvbnN0IEdhbWVDb250cm9sbGVyID0gKGdhbWUsIHVpLCBwbGF5ZXJzID0gW10sIGdhbWVib2FyZHMgPSBbXSkgPT4ge1xuICAvLyBBZGQgdmFsaWRhdGlvbiBhdCB0aGUgc3RhcnRcbiAgaWYgKCFnYW1lKSB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuR0FNRV9SRVFVSVJFRCk7XG4gIGlmICghdWkpIHRocm93IG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5VSV9SRVFVSVJFRCk7XG5cbiAgLy8gVmFsaWRhdGUgcGxheWVycyBpZiBwcm92aWRlZFxuICBpZiAocGxheWVycy5sZW5ndGggPiAwICYmIHBsYXllcnMubGVuZ3RoICE9PSAyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLklOVkFMSURfUExBWUVSU19DT1VOVCk7XG4gIH1cblxuICAvLyBWYWxpZGF0ZSBnYW1lYm9hcmRzIGlmIHByb3ZpZGVkXG4gIGlmIChnYW1lYm9hcmRzLmxlbmd0aCA+IDAgJiYgZ2FtZWJvYXJkcy5sZW5ndGggIT09IDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuSU5WQUxJRF9HQU1FQk9BUkRTX0NPVU5UKTtcbiAgfVxuXG4gIC8vICoqRWxldmF0ZSBwbGF5ZXIgYW5kIGdhbWVib2FyZCB2YXJpYWJsZXMgdG8gdGhlIGZhY3RvcnkgZnVuY3Rpb24gc2NvcGUqKlxuICB0cnkge1xuICAgIGNvbnN0IFtwbGF5ZXIxLCBwbGF5ZXIyXSA9XG4gICAgICBwbGF5ZXJzLmxlbmd0aCA9PT0gMlxuICAgICAgICA/IHBsYXllcnNcbiAgICAgICAgOiBbXG4gICAgICAgICAgICBQbGF5ZXIoXG4gICAgICAgICAgICAgIFBMQVlFUlMuUExBWUVSMS5UWVBFLFxuICAgICAgICAgICAgICBQTEFZRVJTLlBMQVlFUjEuTkFNRSxcbiAgICAgICAgICAgICAgUExBWUVSUy5QTEFZRVIxLklEXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgUGxheWVyKFxuICAgICAgICAgICAgICBQTEFZRVJTLlBMQVlFUjIuVFlQRSxcbiAgICAgICAgICAgICAgUExBWUVSUy5QTEFZRVIyLk5BTUUsXG4gICAgICAgICAgICAgIFBMQVlFUlMuUExBWUVSMi5JRFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICBdO1xuICAgIGNvbnN0IFtnYW1lYm9hcmQxLCBnYW1lYm9hcmQyXSA9IGdhbWVib2FyZHMubGVuZ3RoID09PSAyID8gZ2FtZWJvYXJkcyA6IFtdO1xuXG4gICAgLy8gTWFwcGluZyBvZiBwbGF5ZXIgSURzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgYm9hcmQgY29udGFpbmVyIElEc1xuICAgIGNvbnN0IHBsYXllckJvYXJkTWFwID0ge1xuICAgICAgcGxheWVyMTogUExBWUVSX0JPQVJEUy5QTEFZRVIxLFxuICAgICAgcGxheWVyMjogUExBWUVSX0JPQVJEUy5QTEFZRVIyLFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgcGxheWVycy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtBcnJheTxQbGF5ZXI+fSBBbiBhcnJheSBjb250YWluaW5nIHBsYXllcjEgYW5kIHBsYXllcjIuXG4gICAgICovXG4gICAgY29uc3QgZ2V0UGxheWVycyA9ICgpID0+IFtwbGF5ZXIxLCBwbGF5ZXIyXTtcblxuICAgIC8qKlxuICAgICAqIHBsYWNlU2hpcHNGb3JQbGF5ZXJcbiAgICAgKlxuICAgICAqIFBsYWNlcyBzaGlwcyBmb3IgYSBnaXZlbiBwbGF5ZXIgZWl0aGVyIHJhbmRvbWx5IG9yIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllciAtIFRoZSBwbGF5ZXIgZm9yIHdob20gdG8gcGxhY2Ugc2hpcHNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJhbmRvbSAtIElmIHRydWUsIHBsYWNlIHNoaXBzIHJhbmRvbWx5OyBvdGhlcndpc2UsIHBsYWNlIG1hbnVhbGx5XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgY29uc3QgcGxhY2VTaGlwc0ZvclBsYXllciA9IChwbGF5ZXIsIHJhbmRvbSA9IHRydWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZCA9IHBsYXllci5nZXRHYW1lYm9hcmQoKTtcbiAgICAgICAgaWYgKHJhbmRvbSkge1xuICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXBzUmFuZG9tbHkoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzaGlwc1RvUGxhY2UgPSBCQVRUTEVTSElQUy5tYXAoKGJhdHRsZXNoaXApID0+XG4gICAgICAgICAgICBTaGlwKGJhdHRsZXNoaXAubGVuZ3RoKVxuICAgICAgICAgICk7XG4gICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwc1RvUGxhY2VbMF0sIDAsIDAsIE9SSUVOVEFUSU9OUy5IT1JJWk9OVEFMKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdWkuZGlzcGxheU1lc3NhZ2UoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBJbml0aWFsaXphdGlvblxuICAgIC8qKlxuICAgICAqIHN0YXJ0R2FtZVxuICAgICAqXG4gICAgICogU3RhcnRzIG9yIHJlc3RhcnRzIHRoZSBnYW1lIGJ5IGluaXRpYWxpemluZyBwbGF5ZXJzIGFuZCBwbGFjaW5nIHNoaXBzLlxuICAgICAqXG4gICAgICogQHJldHVybnMge09iamVjdH0gVGhlIGluaXRpYWwgZ2FtZSBzdGF0ZVxuICAgICAqL1xuICAgIGNvbnN0IHN0YXJ0R2FtZSA9ICgpID0+IHtcbiAgICAgIGlmIChnYW1lLmlzR2FtZVN0YXJ0ZWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuR0FNRV9BTFJFQURZX1NUQVJURUQpO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBQbGFjZSBzaGlwcyBmb3IgYm90aCBwbGF5ZXJzIGJlZm9yZSBpbml0aWFsaXppbmcgZ2FtZVxuICAgICAgICBwbGFjZVNoaXBzRm9yUGxheWVyKHBsYXllcjEsIHRydWUpO1xuICAgICAgICBwbGFjZVNoaXBzRm9yUGxheWVyKHBsYXllcjIsIHRydWUpO1xuXG4gICAgICAgIGdhbWUuaW5pdGlhbGl6ZUdhbWUocGxheWVyMSwgcGxheWVyMik7XG4gICAgICAgIHVpLmluaXRVSShwbGF5ZXIxLCBwbGF5ZXIyKTtcbiAgICAgICAgdWkuYWRkQm9hcmRFdmVudExpc3RlbmVycyhQTEFZRVJfQk9BUkRTLlBMQVlFUjIsIGhhbmRsZUF0dGFjayk7XG4gICAgICAgIGlmIChnYW1lLmdldEN1cnJlbnRQbGF5ZXIoKS5nZXRUeXBlKCkgPT09IFwiaHVtYW5cIikge1xuICAgICAgICAgIHVpLmVuYWJsZUJvYXJkSW50ZXJhY3Rpb24oUExBWUVSX0JPQVJEUy5QTEFZRVIyKTtcbiAgICAgICAgfVxuICAgICAgICB1aS5kaXNwbGF5TWVzc2FnZShTVUNDRVNTX01FU1NBR0VTLkdBTUVfU1RBUlRFRCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdWkuZGlzcGxheU1lc3NhZ2UoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXN0YXJ0R2FtZVxuICAgICAqXG4gICAgICogUmVzdGFydHMgdGhlIGdhbWUgYnkgcmVzZXR0aW5nIGdhbWUgc3RhdGUgYW5kIHJlLXBsYWNpbmcgc2hpcHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBjb25zdCByZXN0YXJ0R2FtZSA9ICgpID0+IHtcbiAgICAgIC8vIFJlc2V0IHRoZSBnYW1lIHN0YXRlXG4gICAgICBnYW1lLnJlc2V0R2FtZSgpO1xuICAgICAgdWkucmVzZXRVSSgpO1xuXG4gICAgICAvLyBQbGFjZSBzaGlwcyBmb3IgYm90aCBwbGF5ZXJzXG4gICAgICBwbGFjZVNoaXBzRm9yUGxheWVyKHBsYXllcjEsIHRydWUpO1xuICAgICAgcGxhY2VTaGlwc0ZvclBsYXllcihwbGF5ZXIyLCB0cnVlKTtcblxuICAgICAgc3RhcnRHYW1lKCk7XG4gICAgfTtcblxuICAgIC8vIEdhbWUgRmxvdyBNYW5hZ2VtZW50XG4gICAgLy8gVE9ETyBpbnZlc3RpZ2F0ZSB0aGlzIG1ldGhvZFxuICAgIGNvbnN0IGhhbmRsZUF0dGFjayA9ICh4LCB5KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoZ2FtZS5pc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuR0FNRV9PVkVSKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnYW1lLmdldEN1cnJlbnRQbGF5ZXIoKS5nZXRUeXBlKCkgPT09IFwiY29tcHV0ZXJcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhdHRhY2tSZXN1bHQgPSBnYW1lLmF0dGFjayh4LCB5KTtcbiAgICAgICAgaGFuZGxlQXR0YWNrUmVzdWx0KGF0dGFja1Jlc3VsdCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICFnYW1lLmlzR2FtZU92ZXIoKSAmJlxuICAgICAgICAgIGdhbWUuZ2V0Q3VycmVudFBsYXllcigpLmdldFR5cGUoKSA9PT0gXCJjb21wdXRlclwiXG4gICAgICAgICkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBsYXllciA9IGdhbWUuZ2V0Q3VycmVudFBsYXllcigpO1xuICAgICAgICAgICAgICBjb25zdCBvcHBvbmVudEJvYXJkID0gZ2FtZS5nZXRPcHBvbmVudCgpLmdldEdhbWVib2FyZCgpO1xuICAgICAgICAgICAgICBjb25zdCBjb21wdXRlck1vdmUgPSBjdXJyZW50UGxheWVyLm1ha2VTbWFydE1vdmUob3Bwb25lbnRCb2FyZCk7XG4gICAgICAgICAgICAgIGF0dGFja1Jlc3VsdCA9IGdhbWUuYXR0YWNrKGNvbXB1dGVyTW92ZS54LCBjb21wdXRlck1vdmUueSk7XG4gICAgICAgICAgICAgIGhhbmRsZUF0dGFja1Jlc3VsdChhdHRhY2tSZXN1bHQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgdWkuZGlzcGxheU1lc3NhZ2UoXCJFcnJvciBkdXJpbmcgY29tcHV0ZXIgbW92ZTogXCIgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhdHRhY2tSZXN1bHQ7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB1aS5kaXNwbGF5TWVzc2FnZShlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUF0dGFja1Jlc3VsdCA9IChhdHRhY2tSZXN1bHQpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRQbGF5ZXIgPSBnYW1lLmdldEN1cnJlbnRQbGF5ZXIoKTtcbiAgICAgIGNvbnN0IG9wcG9uZW50ID0gZ2FtZS5nZXRPcHBvbmVudCgpO1xuXG4gICAgICAvLyBEaXNwbGF5IGhpdC9taXNzIG1lc3NhZ2VcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICBhdHRhY2tSZXN1bHQucmVzdWx0ID09PSBcImhpdFwiXG4gICAgICAgICAgPyBgJHtjdXJyZW50UGxheWVyLmdldE5hbWUoKX0gaGl0ICR7b3Bwb25lbnQuZ2V0TmFtZSgpfSdzICR7XG4gICAgICAgICAgICAgIGF0dGFja1Jlc3VsdC5zaGlwVHlwZVxuICAgICAgICAgICAgfSFgXG4gICAgICAgICAgOiBgJHtjdXJyZW50UGxheWVyLmdldE5hbWUoKX0gbWlzc2VkYDtcbiAgICAgIHVpLmRpc3BsYXlNZXNzYWdlKG1lc3NhZ2UpO1xuXG4gICAgICAvLyBJZiBhIHNoaXAgd2FzIHN1bmssIGRpc3BsYXkgc2lua2luZyBtZXNzYWdlXG4gICAgICBpZiAoYXR0YWNrUmVzdWx0LnN1bmspIHtcbiAgICAgICAgY29uc3Qgc2lua01lc3NhZ2UgPSBgJHtjdXJyZW50UGxheWVyLmdldE5hbWUoKX0gc3VuayAke29wcG9uZW50LmdldE5hbWUoKX0ncyAke1xuICAgICAgICAgIGF0dGFja1Jlc3VsdC5zaGlwVHlwZVxuICAgICAgICB9IWA7XG4gICAgICAgIHVpLmRpc3BsYXlNZXNzYWdlKHNpbmtNZXNzYWdlKTtcblxuICAgICAgICAvLyBVcGRhdGUgc2NvcmVzIC0gY291bnQgc2hpcHMgc3VuayBvbiBvcHBvbmVudCdzIGJvYXJkXG4gICAgICAgIGNvbnN0IHBsYXllcjFTY29yZSA9IHBsYXllcjIuZ2V0R2FtZWJvYXJkKCkuZ2V0U3Vua1NoaXBzQ291bnQoKTsgLy8gU2hpcHMgcGxheWVyMSBoYXMgc3Vua1xuICAgICAgICBjb25zdCBwbGF5ZXIyU2NvcmUgPSBwbGF5ZXIxLmdldEdhbWVib2FyZCgpLmdldFN1bmtTaGlwc0NvdW50KCk7IC8vIFNoaXBzIHBsYXllcjIgaGFzIHN1bmtcbiAgICAgICAgdWkudXBkYXRlU2NvcmUocGxheWVyMSwgcGxheWVyMVNjb3JlLCBwbGF5ZXIyLCBwbGF5ZXIyU2NvcmUpO1xuICAgICAgfVxuXG4gICAgICAvLyBBbHdheXMgcmVuZGVyIGJvdGggYm9hcmRzIHdpdGggdGhlaXIgY29ycmVjdCBzdGF0ZXNcbiAgICAgIGNvbnN0IGlzUGxheWVyMUN1cnJlbnQgPSBjdXJyZW50UGxheWVyID09PSBwbGF5ZXIxO1xuICAgICAgdWkucmVuZGVyQm9hcmQoXG4gICAgICAgIHBsYXllcjEuZ2V0R2FtZWJvYXJkKCkuZ2V0Qm9hcmQoKSxcbiAgICAgICAgUExBWUVSX0JPQVJEUy5QTEFZRVIxLFxuICAgICAgICB0cnVlIC8vIEFsd2F5cyBzaG93IHNoaXBzIG9uIHBsYXllciAxJ3MgYm9hcmRcbiAgICAgICk7XG4gICAgICB1aS5yZW5kZXJCb2FyZChcbiAgICAgICAgcGxheWVyMi5nZXRHYW1lYm9hcmQoKS5nZXRCb2FyZCgpLFxuICAgICAgICBQTEFZRVJfQk9BUkRTLlBMQVlFUjIsXG4gICAgICAgIGZhbHNlIC8vIE5ldmVyIHNob3cgc2hpcHMgb24gcGxheWVyIDIncyBib2FyZFxuICAgICAgKTtcblxuICAgICAgLy8gUmUtYWRkIGV2ZW50IGxpc3RlbmVycyBhZnRlciByZW5kZXJpbmdcbiAgICAgIHVpLmFkZEJvYXJkRXZlbnRMaXN0ZW5lcnMoUExBWUVSX0JPQVJEUy5QTEFZRVIyLCBoYW5kbGVBdHRhY2spO1xuXG4gICAgICAvLyBDaGVjayBmb3IgZ2FtZSBvdmVyXG4gICAgICBpZiAoZ2FtZS5pc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgdWkuc2hvd0dhbWVPdmVyU2NyZWVuKGN1cnJlbnRQbGF5ZXIuZ2V0TmFtZSgpKTtcbiAgICAgICAgdWkuZGlzYWJsZUJvYXJkSW50ZXJhY3Rpb24oUExBWUVSX0JPQVJEUy5QTEFZRVIyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBTd2l0Y2ggdHVybnMgYW5kIHVwZGF0ZSBVSSBhY2NvcmRpbmdseVxuICAgICAgZ2FtZS5zd2l0Y2hUdXJuKCk7XG4gICAgICBjb25zdCBuZXdDdXJyZW50UGxheWVyID0gZ2FtZS5nZXRDdXJyZW50UGxheWVyKCk7XG4gICAgICB1aS51cGRhdGVDdXJyZW50UGxheWVyKG5ld0N1cnJlbnRQbGF5ZXIpO1xuXG4gICAgICAvLyBFbmFibGUvZGlzYWJsZSBib2FyZHMgYmFzZWQgb24gd2hvc2UgdHVybiBpdCBpc1xuICAgICAgaWYgKG5ld0N1cnJlbnRQbGF5ZXIuZ2V0VHlwZSgpID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgdWkuZW5hYmxlQm9hcmRJbnRlcmFjdGlvbihQTEFZRVJfQk9BUkRTLlBMQVlFUjIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkuZGlzYWJsZUJvYXJkSW50ZXJhY3Rpb24oUExBWUVSX0JPQVJEUy5QTEFZRVIyKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0R2FtZSxcbiAgICAgIHJlc3RhcnRHYW1lLFxuICAgICAgaGFuZGxlQXR0YWNrLFxuICAgICAgZ2V0UGxheWVycyxcbiAgICAgIHBsYWNlU2hpcHNGb3JQbGF5ZXIsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB1aS5kaXNwbGF5TWVzc2FnZShlcnJvci5tZXNzYWdlKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAvKiBCYXNlIHN0eWxlcyAqL1xuOnJvb3Qge1xuICAtLWNlbGwtc2l6ZS1kZXNrdG9wOiA0MHB4O1xuICAtLWNlbGwtc2l6ZS10YWJsZXQ6IDM1cHg7XG4gIC0tY2VsbC1zaXplLW1vYmlsZTogMzBweDtcbiAgLS1nYXAtZGVza3RvcDogNTBweDtcbiAgLS1nYXAtdGFibGV0OiAzMHB4O1xuICAtLWdhcC1tb2JpbGU6IDIwcHg7XG59XG5cbmJvZHkge1xuICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogMTBweDtcbiAgcGFkZGluZzogMXJlbTtcbiAgbWluLWhlaWdodDogMTAwdmg7XG4gIG1hcmdpbjogMDtcbn1cblxuLyogU2NvcmUgYW5kIEN1cnJlbnQgUGxheWVyICovXG4jc2NvcmUsXG4jY3VycmVudC1wbGF5ZXIsXG4jbWVzc2FnZSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICB3aWR0aDogMTAwJTtcbn1cblxuLyogR2FtZSBDb250YWluZXIgKi9cbiNnYW1lIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiB2YXIoLS1nYXAtZGVza3RvcCk7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIGZsZXgtd3JhcDogd3JhcDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi8qIFBsYXllciBTZWN0aW9ucyAqL1xuLnBsYXllci1zZWN0aW9uIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4vKiBHYW1lIEJvYXJkcyAqL1xuLmJvYXJkIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMTAsIHZhcigtLWNlbGwtc2l6ZS1kZXNrdG9wKSk7XG4gIGdyaWQtdGVtcGxhdGUtcm93czogcmVwZWF0KDEwLCB2YXIoLS1jZWxsLXNpemUtZGVza3RvcCkpO1xuICBnYXA6IDJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcbiAgcGFkZGluZzogMTBweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xufVxuXG4uYm9hcmQtY2VsbCB7XG4gIHdpZHRoOiB2YXIoLS1jZWxsLXNpemUtZGVza3RvcCk7XG4gIGhlaWdodDogdmFyKC0tY2VsbC1zaXplLWRlc2t0b3ApO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi8qIFRhYmxldCBTdHlsZXMgKi9cbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEwMjRweCkge1xuICAuYm9hcmQge1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDEwLCB2YXIoLS1jZWxsLXNpemUtdGFibGV0KSk7XG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiByZXBlYXQoMTAsIHZhcigtLWNlbGwtc2l6ZS10YWJsZXQpKTtcbiAgfVxuXG4gIC5ib2FyZC1jZWxsIHtcbiAgICB3aWR0aDogdmFyKC0tY2VsbC1zaXplLXRhYmxldCk7XG4gICAgaGVpZ2h0OiB2YXIoLS1jZWxsLXNpemUtdGFibGV0KTtcbiAgfVxuXG4gICNnYW1lIHtcbiAgICBnYXA6IHZhcigtLWdhcC10YWJsZXQpO1xuICB9XG5cbiAgaDEge1xuICAgIGZvbnQtc2l6ZTogMS44cmVtO1xuICB9XG5cbiAgaDIge1xuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xuICB9XG59XG5cbi8qIE1vYmlsZSBTdHlsZXMgKi9cbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gIC5ib2FyZCB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMTAsIHZhcigtLWNlbGwtc2l6ZS1tb2JpbGUpKTtcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCgxMCwgdmFyKC0tY2VsbC1zaXplLW1vYmlsZSkpO1xuICB9XG5cbiAgLmJvYXJkLWNlbGwge1xuICAgIHdpZHRoOiB2YXIoLS1jZWxsLXNpemUtbW9iaWxlKTtcbiAgICBoZWlnaHQ6IHZhcigtLWNlbGwtc2l6ZS1tb2JpbGUpO1xuICB9XG5cbiAgI2dhbWUge1xuICAgIGdhcDogdmFyKC0tZ2FwLW1vYmlsZSk7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB9XG5cbiAgaDEge1xuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICB9XG5cbiAgaDIge1xuICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xuICB9XG5cbiAgLnBsYXllci1zZWN0aW9uIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICB9XG59XG5cbi8qIEdhbWUgT3ZlciBNb2RhbCAtIG1ha2UgaXQgcmVzcG9uc2l2ZSAqL1xuLm92ZXJsYXkge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgei1pbmRleDogMTAwMDtcbiAgcGFkZGluZzogMXJlbTtcbn1cblxuLmdhbWUtb3Zlci1jb250ZW50IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gIHBhZGRpbmc6IDJyZW07XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgbWF4LXdpZHRoOiA5MCU7XG4gIHdpZHRoOiBhdXRvO1xufVxuXG4ucGxheS1hZ2Fpbi1idXR0b24ge1xuICBwYWRkaW5nOiAwLjhyZW0gMS41cmVtO1xuICBmb250LXNpemU6IDFyZW07XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzRjYWY1MDtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgbWFyZ2luLXRvcDogMXJlbTtcbn1cblxuLnBsYXktYWdhaW4tYnV0dG9uOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzQ1YTA0OTtcbn1cblxuLyogQ2VsbCBTdGF0ZXMgLSBrZWVwIGV4aXN0aW5nIHN0eWxlcyAqL1xuLnNoaXAge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjY2O1xufVxuLmhpdCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjQ0NDQ7XG59XG4ubWlzcyB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM0NGFhZmY7XG59XG4uc3VuayB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG59XG4jcGxheWVyMi1ib2FyZCAuc3VuayB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4YjAwMDA7XG59XG5cbi8qIFRyYW5zaXRpb25zICovXG4uYm9hcmQtY2VsbCB7XG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlO1xufVxuXG4vKiBBY2Nlc3NpYmlsaXR5ICovXG5AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSkge1xuICAuYm9hcmQtY2VsbCB7XG4gICAgdHJhbnNpdGlvbjogbm9uZTtcbiAgfVxufVxuYCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGVzLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQSxnQkFBZ0I7QUFDaEI7RUFDRSx5QkFBeUI7RUFDekIsd0JBQXdCO0VBQ3hCLHdCQUF3QjtFQUN4QixtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLDhCQUE4QjtFQUM5QixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQixTQUFTO0VBQ1QsYUFBYTtFQUNiLGlCQUFpQjtFQUNqQixTQUFTO0FBQ1g7O0FBRUEsNkJBQTZCO0FBQzdCOzs7RUFHRSxrQkFBa0I7RUFDbEIscUJBQXFCO0VBQ3JCLFdBQVc7QUFDYjs7QUFFQSxtQkFBbUI7QUFDbkI7RUFDRSxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsdUJBQXVCO0FBQ3pCOztBQUVBLG9CQUFvQjtBQUNwQjtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQSxnQkFBZ0I7QUFDaEI7RUFDRSxhQUFhO0VBQ2IsMkRBQTJEO0VBQzNELHdEQUF3RDtFQUN4RCxRQUFRO0VBQ1Isc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0QixzQkFBc0I7RUFDdEIsZUFBZTtBQUNqQjs7QUFFQSxrQkFBa0I7QUFDbEI7RUFDRTtJQUNFLDBEQUEwRDtJQUMxRCx1REFBdUQ7RUFDekQ7O0VBRUE7SUFDRSw4QkFBOEI7SUFDOUIsK0JBQStCO0VBQ2pDOztFQUVBO0lBQ0Usc0JBQXNCO0VBQ3hCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25CO0FBQ0Y7O0FBRUEsa0JBQWtCO0FBQ2xCO0VBQ0U7SUFDRSwwREFBMEQ7SUFDMUQsdURBQXVEO0VBQ3pEOztFQUVBO0lBQ0UsOEJBQThCO0lBQzlCLCtCQUErQjtFQUNqQzs7RUFFQTtJQUNFLHNCQUFzQjtJQUN0QixzQkFBc0I7SUFDdEIsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCO0FBQ0Y7O0FBRUEseUNBQXlDO0FBQ3pDO0VBQ0UsZUFBZTtFQUNmLE1BQU07RUFDTixPQUFPO0VBQ1AsV0FBVztFQUNYLFlBQVk7RUFDWixvQ0FBb0M7RUFDcEMsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2QixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQix5Q0FBeUM7RUFDekMsY0FBYztFQUNkLFdBQVc7QUFDYjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZUFBZTtFQUNmLHlCQUF5QjtFQUN6QixZQUFZO0VBQ1osWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7O0FBRUEsdUNBQXVDO0FBQ3ZDO0VBQ0Usc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSx5QkFBeUI7QUFDM0I7QUFDQTtFQUNFLHlCQUF5QjtBQUMzQjtBQUNBO0VBQ0Usc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSx5QkFBeUI7QUFDM0I7O0FBRUEsZ0JBQWdCO0FBQ2hCO0VBQ0Usc0NBQXNDO0FBQ3hDOztBQUVBLGtCQUFrQjtBQUNsQjtFQUNFO0lBQ0UsZ0JBQWdCO0VBQ2xCO0FBQ0ZcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLyogQmFzZSBzdHlsZXMgKi9cXG46cm9vdCB7XFxuICAtLWNlbGwtc2l6ZS1kZXNrdG9wOiA0MHB4O1xcbiAgLS1jZWxsLXNpemUtdGFibGV0OiAzNXB4O1xcbiAgLS1jZWxsLXNpemUtbW9iaWxlOiAzMHB4O1xcbiAgLS1nYXAtZGVza3RvcDogNTBweDtcXG4gIC0tZ2FwLXRhYmxldDogMzBweDtcXG4gIC0tZ2FwLW1vYmlsZTogMjBweDtcXG59XFxuXFxuYm9keSB7XFxuICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBnYXA6IDEwcHg7XFxuICBwYWRkaW5nOiAxcmVtO1xcbiAgbWluLWhlaWdodDogMTAwdmg7XFxuICBtYXJnaW46IDA7XFxufVxcblxcbi8qIFNjb3JlIGFuZCBDdXJyZW50IFBsYXllciAqL1xcbiNzY29yZSxcXG4jY3VycmVudC1wbGF5ZXIsXFxuI21lc3NhZ2Uge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcblxcbi8qIEdhbWUgQ29udGFpbmVyICovXFxuI2dhbWUge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGdhcDogdmFyKC0tZ2FwLWRlc2t0b3ApO1xcbiAgbWFyZ2luLXRvcDogMTBweDtcXG4gIGZsZXgtd3JhcDogd3JhcDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbn1cXG5cXG4vKiBQbGF5ZXIgU2VjdGlvbnMgKi9cXG4ucGxheWVyLXNlY3Rpb24ge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4vKiBHYW1lIEJvYXJkcyAqL1xcbi5ib2FyZCB7XFxuICBkaXNwbGF5OiBncmlkO1xcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMTAsIHZhcigtLWNlbGwtc2l6ZS1kZXNrdG9wKSk7XFxuICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCgxMCwgdmFyKC0tY2VsbC1zaXplLWRlc2t0b3ApKTtcXG4gIGdhcDogMnB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBib3JkZXItcmFkaXVzOiA1cHg7XFxufVxcblxcbi5ib2FyZC1jZWxsIHtcXG4gIHdpZHRoOiB2YXIoLS1jZWxsLXNpemUtZGVza3RvcCk7XFxuICBoZWlnaHQ6IHZhcigtLWNlbGwtc2l6ZS1kZXNrdG9wKTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4vKiBUYWJsZXQgU3R5bGVzICovXFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTAyNHB4KSB7XFxuICAuYm9hcmQge1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgxMCwgdmFyKC0tY2VsbC1zaXplLXRhYmxldCkpO1xcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCgxMCwgdmFyKC0tY2VsbC1zaXplLXRhYmxldCkpO1xcbiAgfVxcblxcbiAgLmJvYXJkLWNlbGwge1xcbiAgICB3aWR0aDogdmFyKC0tY2VsbC1zaXplLXRhYmxldCk7XFxuICAgIGhlaWdodDogdmFyKC0tY2VsbC1zaXplLXRhYmxldCk7XFxuICB9XFxuXFxuICAjZ2FtZSB7XFxuICAgIGdhcDogdmFyKC0tZ2FwLXRhYmxldCk7XFxuICB9XFxuXFxuICBoMSB7XFxuICAgIGZvbnQtc2l6ZTogMS44cmVtO1xcbiAgfVxcblxcbiAgaDIge1xcbiAgICBmb250LXNpemU6IDEuM3JlbTtcXG4gIH1cXG59XFxuXFxuLyogTW9iaWxlIFN0eWxlcyAqL1xcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7XFxuICAuYm9hcmQge1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgxMCwgdmFyKC0tY2VsbC1zaXplLW1vYmlsZSkpO1xcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCgxMCwgdmFyKC0tY2VsbC1zaXplLW1vYmlsZSkpO1xcbiAgfVxcblxcbiAgLmJvYXJkLWNlbGwge1xcbiAgICB3aWR0aDogdmFyKC0tY2VsbC1zaXplLW1vYmlsZSk7XFxuICAgIGhlaWdodDogdmFyKC0tY2VsbC1zaXplLW1vYmlsZSk7XFxuICB9XFxuXFxuICAjZ2FtZSB7XFxuICAgIGdhcDogdmFyKC0tZ2FwLW1vYmlsZSk7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICB9XFxuXFxuICBoMSB7XFxuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgfVxcblxcbiAgaDIge1xcbiAgICBmb250LXNpemU6IDEuMnJlbTtcXG4gIH1cXG5cXG4gIC5wbGF5ZXItc2VjdGlvbiB7XFxuICAgIG1hcmdpbi1ib3R0b206IDFyZW07XFxuICB9XFxufVxcblxcbi8qIEdhbWUgT3ZlciBNb2RhbCAtIG1ha2UgaXQgcmVzcG9uc2l2ZSAqL1xcbi5vdmVybGF5IHtcXG4gIHBvc2l0aW9uOiBmaXhlZDtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDA7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICB6LWluZGV4OiAxMDAwO1xcbiAgcGFkZGluZzogMXJlbTtcXG59XFxuXFxuLmdhbWUtb3Zlci1jb250ZW50IHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xcbiAgcGFkZGluZzogMnJlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xcbiAgbWF4LXdpZHRoOiA5MCU7XFxuICB3aWR0aDogYXV0bztcXG59XFxuXFxuLnBsYXktYWdhaW4tYnV0dG9uIHtcXG4gIHBhZGRpbmc6IDAuOHJlbSAxLjVyZW07XFxuICBmb250LXNpemU6IDFyZW07XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGNhZjUwO1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYm9yZGVyOiBub25lO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgbWFyZ2luLXRvcDogMXJlbTtcXG59XFxuXFxuLnBsYXktYWdhaW4tYnV0dG9uOmhvdmVyIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM0NWEwNDk7XFxufVxcblxcbi8qIENlbGwgU3RhdGVzIC0ga2VlcCBleGlzdGluZyBzdHlsZXMgKi9cXG4uc2hpcCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjY2O1xcbn1cXG4uaGl0IHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjQ0NDQ7XFxufVxcbi5taXNzIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM0NGFhZmY7XFxufVxcbi5zdW5rIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XFxufVxcbiNwbGF5ZXIyLWJvYXJkIC5zdW5rIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM4YjAwMDA7XFxufVxcblxcbi8qIFRyYW5zaXRpb25zICovXFxuLmJvYXJkLWNlbGwge1xcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7XFxufVxcblxcbi8qIEFjY2Vzc2liaWxpdHkgKi9cXG5AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSkge1xcbiAgLmJvYXJkLWNlbGwge1xcbiAgICB0cmFuc2l0aW9uOiBub25lO1xcbiAgfVxcbn1cXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107XG5cbiAgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IFwiXCI7XG4gICAgICB2YXIgbmVlZExheWVyID0gdHlwZW9mIGl0ZW1bNV0gIT09IFwidW5kZWZpbmVkXCI7XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07XG5cbiAgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgbGlzdC5pID0gZnVuY3Rpb24gaShtb2R1bGVzLCBtZWRpYSwgZGVkdXBlLCBzdXBwb3J0cywgbGF5ZXIpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIHVuZGVmaW5lZF1dO1xuICAgIH1cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2tdWzBdO1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgbW9kdWxlcy5sZW5ndGg7IF9rKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2tdKTtcbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbGF5ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtWzVdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN1cHBvcnRzKSB7XG4gICAgICAgIGlmICghaXRlbVs0XSkge1xuICAgICAgICAgIGl0ZW1bNF0gPSBcIlwiLmNvbmNhdChzdXBwb3J0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzRdID0gc3VwcG9ydHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV07XG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbihcIlxcblwiKTtcbiAgfVxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oXCJcXG5cIik7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5ET00gPSBbXTtcbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRE9NLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRE9NW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXhCeUlkZW50aWZpZXIgPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM10sXG4gICAgICBzdXBwb3J0czogaXRlbVs0XSxcbiAgICAgIGxheWVyOiBpdGVtWzVdXG4gICAgfTtcbiAgICBpZiAoaW5kZXhCeUlkZW50aWZpZXIgIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHVwZGF0ZXIgPSBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKTtcbiAgICAgIG9wdGlvbnMuYnlJbmRleCA9IGk7XG4gICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoaSwgMCwge1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiB1cGRhdGVyLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5mdW5jdGlvbiBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBhcGkgPSBvcHRpb25zLmRvbUFQSShvcHRpb25zKTtcbiAgYXBpLnVwZGF0ZShvYmopO1xuICB2YXIgdXBkYXRlciA9IGZ1bmN0aW9uIHVwZGF0ZXIobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCAmJiBuZXdPYmouc3VwcG9ydHMgPT09IG9iai5zdXBwb3J0cyAmJiBuZXdPYmoubGF5ZXIgPT09IG9iai5sYXllcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBhcGkudXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwaS5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiB1cGRhdGVyO1xufVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG4gICAgICBpZiAoc3R5bGVzSW5ET01bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRE9NW19pbmRleF0udXBkYXRlcigpO1xuICAgICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIG1lbW8gPSB7fTtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBnZXRUYXJnZXQodGFyZ2V0KSB7XG4gIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xuXG4gICAgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcbiAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICB9XG4gIHJldHVybiBtZW1vW3RhcmdldF07XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gaW5zZXJ0QnlTZWxlY3RvcihpbnNlcnQsIHN0eWxlKSB7XG4gIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQoaW5zZXJ0KTtcbiAgaWYgKCF0YXJnZXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICB9XG4gIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydEJ5U2VsZWN0b3I7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gIG9wdGlvbnMuc2V0QXR0cmlidXRlcyhlbGVtZW50LCBvcHRpb25zLmF0dHJpYnV0ZXMpO1xuICBvcHRpb25zLmluc2VydChlbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xuICByZXR1cm4gZWxlbWVudDtcbn1cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0U3R5bGVFbGVtZW50OyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcyhzdHlsZUVsZW1lbnQpIHtcbiAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSBcInVuZGVmaW5lZFwiID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuICBpZiAobm9uY2UpIHtcbiAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgbm9uY2UpO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlczsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBhcHBseShzdHlsZUVsZW1lbnQsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gXCJcIjtcbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KG9iai5zdXBwb3J0cywgXCIpIHtcIik7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpO1xuICB9XG4gIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2Ygb2JqLmxheWVyICE9PSBcInVuZGVmaW5lZFwiO1xuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwiQGxheWVyXCIuY29uY2F0KG9iai5sYXllci5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KG9iai5sYXllcikgOiBcIlwiLCBcIiB7XCIpO1xuICB9XG4gIGNzcyArPSBvYmouY3NzO1xuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcbiAgaWYgKHNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9XG5cbiAgLy8gRm9yIG9sZCBJRVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG4gIG9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG59XG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGVFbGVtZW50LnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBkb21BUEkob3B0aW9ucykge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge30sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgfTtcbiAgfVxuICB2YXIgc3R5bGVFbGVtZW50ID0gb3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gIHJldHVybiB7XG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUob2JqKSB7XG4gICAgICBhcHBseShzdHlsZUVsZW1lbnQsIG9wdGlvbnMsIG9iaik7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuICAgIH1cbiAgfTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZG9tQVBJOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50KSB7XG4gIGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc3R5bGVUYWdUcmFuc2Zvcm07Il0sIm5hbWVzIjpbIm9wdGlvbnMiLCJzdHlsZVRhZ1RyYW5zZm9ybSIsInNldEF0dHJpYnV0ZXMiLCJpbnNlcnQiLCJkb21BUEkiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJsb2NhbHMiLCJDRUxMX1NUQVRVUyIsIk9SSUVOVEFUSU9OUyIsIkJPQVJEX1NJWkUiLCJQTEFZRVJfQk9BUkRTIiwiU1VDQ0VTU19NRVNTQUdFUyIsIkVSUk9SX01FU1NBR0VTIiwiSU5WQUxJRF9PUklFTlRBVElPTiIsIklOVkFMSURfQ09PUkRJTkFURVMiLCJJTlZBTElEX1NISVAiLCJPVVRfT0ZfQk9VTkRTX0hPUklaT05UQUwiLCJPVVRfT0ZfQk9VTkRTX1ZFUlRJQ0FMIiwiT1ZFUkxBUFBJTkdfU0hJUCIsIkFMUkVBRFlfQVRUQUNLRUQiLCJQTEFZRVIxX0JPQVJEX0ZBSUxFRCIsIlBMQVlFUjJfQk9BUkRfRkFJTEVEIiwiUExBWUVSX1JFUVVJUkVEIiwiSU5WQUxJRF9QTEFZRVJfT0JKRUNUIiwiSU5WQUxJRF9QTEFZRVIiLCJVTklRVUVfTkFNRSIsIkdBTUVCT0FSRFNfUkVRVUlSRUQiLCJHQU1FQ09OVFJPTExFUl9JTklUX0VSUk9SIiwiQ09OVEFJTkVSX05PVF9GT1VORCIsIkFMUkVBRFlfU1RBUlRFRCIsIkdBTUVfT1ZFUiIsIkdBTUVfTk9UX0lOSVRJQUxJWkVEIiwiTk9fVkFMSURfTU9WRVMiLCJHQU1FX1JFUVVJUkVEIiwiVUlfUkVRVUlSRUQiLCJJTlZBTElEX1BMQVlFUlNfQ09VTlQiLCJJTlZBTElEX0dBTUVCT0FSRFNfQ09VTlQiLCJQTEFZRVJTIiwiUGxheWVyIiwidHlwZSIsIm5hbWUiLCJpZCIsIkVycm9yIiwiSU5WQUxJRF9QTEFZRVJfVFlQRSIsInRyaW0iLCJJTlZBTElEX1BMQVlFUl9OQU1FIiwiSU5WQUxJRF9QTEFZRVJfSUQiLCJnYW1lYm9hcmQiLCJhY3RpdmVIaXRzIiwiY3VycmVudERpcmVjdGlvbiIsIm1ha2VTbWFydE1vdmUiLCJvcHBvbmVudEJvYXJkIiwibGVuZ3RoIiwidGFyZ2V0U2hpcCIsImh1bnROZXdTaGlwIiwibGFzdEhpdCIsImZvbGxvd1NoaXBMaW5lIiwidmFsaWRNb3ZlcyIsIngiLCJ5IiwiZmlsdGVyIiwibW92ZSIsImlzVmFsaWRNb3ZlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZmlyc3RIaXQiLCJwb3NzaWJsZU1vdmVzIiwicHVzaCIsIm1pbiIsIm1hcCIsImgiLCJtYXgiLCJzaXplIiwiZ2V0U2l6ZSIsImFsbE1vdmVzIiwiaGFzQmVlbkF0dGFja2VkIiwiYXR0YWNrIiwib3Bwb25lbnRHYW1lYm9hcmQiLCJhdHRhY2tSZXN1bHQiLCJyZWNlaXZlQXR0YWNrIiwicmVzdWx0Iiwic3VuayIsImdldE5hbWUiLCJnZXRJZCIsImdldFR5cGUiLCJnZXRHYW1lYm9hcmQiLCJzZXRHYW1lYm9hcmQiLCJuZXdHYW1lYm9hcmQiLCJnZXRWYWxpZENvb3JkaW5hdGVzIiwiZ2V0TmV4dE1vdmUiLCJJTlZBTElEX0dBTUVCT0FSRCIsImhhc1ZhbGlkTW92ZSIsIm1ha2VSYW5kb21Nb3ZlIiwiYWxsQXR0YWNrcyIsImdldEFsbEF0dGFja3MiLCJoYXMiLCJTaGlwIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiaGl0cyIsImhpdCIsImdldEhpdHMiLCJnZXRMZW5ndGgiLCJpc1N1bmsiLCJjcmVhdGVDZWxsIiwic2hpcCIsInNoaXBUeXBlIiwiaXNIaXQiLCJzdGF0dXMiLCJHYW1lYm9hcmQiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJzaGlwcyIsImJvYXJkIiwicGxhY2VkU2hpcHMiLCJtaXNzZXMiLCJTZXQiLCJpbml0aWFsaXplQm9hcmQiLCJjcmVhdGVCb2FyZCIsIkFycmF5IiwiZmlsbCIsInBsYWNlU2hpcCIsIm9yaWVudGF0aW9uIiwidmFsaWRhdGVTaGlwUGxhY2VtZW50IiwiY2hlY2tPdXRPZkJvdW5kcyIsImNoZWNrT3ZlcmxhcCIsInBsYWNlU2hpcE9uQm9hcmQiLCJzaGlwTGVuZ3RoIiwicG9zaXRpb25zIiwiaSIsInBvc1giLCJwb3NZIiwiaW5jbHVkZXMiLCJnZXRCb2FyZCIsImdldFNoaXBzIiwiZ2V0UGxhY2VkU2hpcHMiLCJwbGFjZVNoaXBzUmFuZG9tbHkiLCJpc0FycmF5IiwidmFsaWRhdGVTaGlwc0NhbkZpdCIsInRvdGFsU2hpcFNwYWNlIiwicmVkdWNlIiwic3VtIiwiYm9hcmRTcGFjZSIsIm9yaWVudGF0aW9ucyIsImJhdHRsZXNoaXAiLCJwbGFjZWQiLCJhdHRlbXB0cyIsImVycm9yIiwiY2VsbCIsImNvb3JkaW5hdGVzIiwiZm9yRWFjaCIsIl9yZWYiLCJhZGQiLCJfcmVmMiIsImdldE1pc3NlZEF0dGFja3MiLCJhcmVBbGxTaGlwc1N1bmsiLCJldmVyeSIsImFsbFNoaXBzUGxhY2VkIiwiZXhwZWN0ZWRUb3RhbCIsInRvdGFsIiwiYWN0dWFsVG90YWwiLCJyb3ciLCJhbGxQbGFjZWQiLCJyZXNldCIsImNsZWFyIiwiZ2V0U3Vua1NoaXBzQ291bnQiLCJjb3VudCIsIl9yZWYzIiwiQkFUVExFU0hJUFMiLCJDU1NfQ0xBU1NFUyIsIkNTU19JRFMiLCJwbGF5ZXIxIiwicGxheWVyMiIsInBsYXllcjFCb2FyZCIsInBsYXllcjJCb2FyZCIsInVpIiwiVUkiLCJjcmVhdGVFbGVtZW50IiwidGFnIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY2xhc3NlcyIsImNsYXNzTGlzdCIsInRleHRDb250ZW50IiwicGFyZW50IiwiYXBwZW5kQ2hpbGQiLCJyZW5kZXJCb2FyZCIsImNvbnRhaW5lcklkIiwiaXNPd25Cb2FyZCIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiZXhpc3RpbmdIYW5kbGVyIiwiX2hhbmRsZUF0dGFjayIsImlubmVySFRNTCIsInJvd0VsZW1lbnQiLCJjZWxsRWxlbWVudCIsImRhdGFzZXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJjb250YWlucyIsImNvbnNvbGUiLCJsb2ciLCJkaXNwbGF5TWVzc2FnZSIsIm1lc3NhZ2UiLCJkdXJhdGlvbiIsIm1lc3NhZ2VEaXYiLCJjbGFzc05hbWUiLCJzZXRUaW1lb3V0IiwidXBkYXRlU2NvcmUiLCJwbGF5ZXIxU2NvcmUiLCJwbGF5ZXIyU2NvcmUiLCJib2R5IiwidXBkYXRlQ3VycmVudFBsYXllciIsInBsYXllciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWN0aW9uIiwidG9nZ2xlIiwicXVlcnlTZWxlY3RvciIsImluaXRVSSIsInBsYXllcnMiLCJnYW1lRGl2IiwiaW5kZXgiLCJjcmVhdGVQbGF5ZXJTZWN0aW9uIiwicGxheWVyRGl2IiwicmVzZXRVSSIsImdhbWVDb250YWluZXIiLCJoZWFkaW5nIiwicmVtb3ZlIiwic2NvcmVEaXYiLCJjdXJyZW50UGxheWVyRGl2IiwiYWRkQm9hcmRFdmVudExpc3RlbmVycyIsImJvYXJkQ29udGFpbmVySWQiLCJjbGlja0hhbmRsZXIiLCJib2FyZENvbnRhaW5lciIsImNlbGxzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImZyb20iLCJwYXJzZUludCIsInNob3dHYW1lT3ZlclNjcmVlbiIsIndpbm5lck5hbWUiLCJleGlzdGluZ0dhbWVPdmVyIiwiZ2FtZU92ZXJEaXYiLCJjb250ZW50RGl2IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlbmFibGVCb2FyZEludGVyYWN0aW9uIiwic3R5bGUiLCJwb2ludGVyRXZlbnRzIiwiZGlzYWJsZUJvYXJkSW50ZXJhY3Rpb24iLCJnYW1lIiwiY3VycmVudFBsYXllciIsImdhbWVTdGFydGVkIiwiZ2FtZU92ZXIiLCJzY29yZSIsInJlcXVpcmVkTWV0aG9kcyIsInNldFNjb3JlIiwidmFsaWRhdGVQbGF5ZXIiLCJwbGF5ZXJMYWJlbCIsIm1ldGhvZCIsImlzR2FtZU92ZXIiLCJnZXRPcHBvbmVudCIsInBsYXllck5hbWUiLCJzZXRHYW1lT3ZlciIsImdldEN1cnJlbnRQbGF5ZXIiLCJzZXRDdXJyZW50UGxheWVyIiwic2V0R2FtZVN0YXJ0ZWQiLCJpbml0aWFsaXplR2FtZSIsInJlc2V0R2FtZSIsImdldFBsYXllcnMiLCJpc0dhbWVTdGFydGVkIiwiZ2V0U2NvcmUiLCJzd2l0Y2hUdXJuIiwiaGFuZGxlQ29tcHV0ZXJUdXJuIiwib3Bwb25lbnQiLCJHYW1lIiwiZ2FtZUNvbnRyb2xsZXIiLCJnYW1lYm9hcmRzIiwiZ2FtZWJvYXJkMSIsImdhbWVib2FyZDIiLCJwbGFjZVNoaXBzRm9yUGxheWVyIiwic2hpcHNUb1BsYWNlIiwic3RhcnRHYW1lIiwiR0FNRV9BTFJFQURZX1NUQVJURUQiLCJoYW5kbGVBdHRhY2siLCJyZXN0YXJ0R2FtZSIsImhhbmRsZUF0dGFja1Jlc3VsdCIsImNvbXB1dGVyTW92ZSIsInNpbmtNZXNzYWdlIiwibmV3Q3VycmVudFBsYXllciIsIkdhbWVDb250cm9sbGVyIiwiX19fQ1NTX0xPQURFUl9FWFBPUlRfX18iLCJtb2R1bGUiLCJleHBvcnRzIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsImxpc3QiLCJ0b1N0cmluZyIsInRoaXMiLCJpdGVtIiwiY29udGVudCIsIm5lZWRMYXllciIsImNvbmNhdCIsImpvaW4iLCJtb2R1bGVzIiwibWVkaWEiLCJkZWR1cGUiLCJzdXBwb3J0cyIsImxheWVyIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImsiLCJfayIsImNzc01hcHBpbmciLCJidG9hIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInNvdXJjZU1hcHBpbmciLCJzdHlsZXNJbkRPTSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsIm1vZHVsZXNUb0RvbSIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsImJhc2UiLCJpbmRleEJ5SWRlbnRpZmllciIsIm9iaiIsImNzcyIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkRWxlbWVudFN0eWxlIiwiYnlJbmRleCIsInNwbGljZSIsImFwaSIsInVwZGF0ZSIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJfaSIsIl9pbmRleCIsIm1lbW8iLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsIndpbmRvdyIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJnZXRUYXJnZXQiLCJhdHRyaWJ1dGVzIiwic3R5bGVFbGVtZW50Iiwibm9uY2UiLCJzZXRBdHRyaWJ1dGUiLCJhcHBseSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZVN0eWxlRWxlbWVudCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiZmlyc3RDaGlsZCIsImNyZWF0ZVRleHROb2RlIl0sInNvdXJjZVJvb3QiOiIifQ==